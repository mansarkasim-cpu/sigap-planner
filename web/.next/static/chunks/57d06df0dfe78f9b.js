(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3247,(e,l,a)=>{"use strict";var t=e.r(7478);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=t(e.r(87915)),i=e.r(14294);a.default=(0,s.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},4080,(e,l,a)=>{"use strict";var t=e.r(7478);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=t(e.r(87915)),i=e.r(14294);a.default=(0,s.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},23708,(e,l,a)=>{"use strict";var t=e.r(7478);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var s=t(e.r(87915)),i=e.r(14294);a.default=(0,s.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},12523,e=>{"use strict";var l=e.i(14294),a=e.i(30878),t=e.i(23703),s=e.i(88627),i=e.i(28960),d=e.i(60152),n=e.i(22921),r=e.i(71666),u=e.i(73509),c=e.i(12744),o=e.i(95013),f=e.i(77678),h=e.i(91962),x=e.i(14067),j=e.i(87695),m=e.i(73743),v=e.i(66769),g=e.i(71606),y=e.i(1138),p=e.i(70993),b=e.i(1083),S=e.i(61609),C=e.i(3247),z=e.i(4080),k=e.i(23708);function w(){let[e,w]=(0,a.useState)([]),[M,P]=(0,a.useState)([]),[_,A]=(0,a.useState)(!1),[E,I]=(0,a.useState)(!1),[L,T]=(0,a.useState)(null),[D,H]=(0,a.useState)(1),[N,O]=(0,a.useState)(20),[R,V]=(0,a.useState)(0),[K,U]=(0,a.useState)("");async function $(e=D,l=N,a=K){A(!0);try{let s=new URLSearchParams;a&&s.set("q",a),e&&s.set("page",String(e)),l&&s.set("pageSize",String(l));let i=await (0,t.default)("/master/sites?"+s.toString());Array.isArray(i)?(w(i),V(0)):(w(i.data||[]),V(i.meta?.total||0),H(i.meta?.page||e),O(i.meta?.pageSize||l))}catch(e){console.error(e),alert(e?.body?.message||e?.message||"Load failed")}finally{A(!1)}}async function q(){try{let e=await (0,t.default)("/master/hubs");P(Array.isArray(e)?e:[])}catch(e){console.error(e)}}async function B(){if(!L||!L.name)return alert("Name required");try{L.id?await (0,t.default)(`/master/sites/${L.id}`,{method:"PATCH",body:L}):await (0,t.default)("/master/sites",{method:"POST",body:L}),I(!1),T(null),await $()}catch(e){alert(e?.body?.message||e?.message||"Save failed")}}async function W(e){if(confirm("Hapus site?"))try{await (0,t.default)(`/master/sites/${e}`,{method:"DELETE"}),await $()}catch(e){alert(e?.body?.message||e?.message||"Delete failed")}}return(0,a.useEffect)(()=>{$(),q()},[]),(0,l.jsxs)(s.default,{sx:{p:2},children:[(0,l.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,l.jsxs)(s.default,{children:[(0,l.jsx)(s.default,{component:"h2",sx:{m:0},children:"Sites"}),(0,l.jsx)(s.default,{sx:{color:"text.secondary",fontSize:13},children:"Manage sites and assign to hubs"})]}),(0,l.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,l.jsx)(g.default,{size:"small",placeholder:"Search",value:K,onChange:e=>U(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(H(1),$(1,N,e.target.value))}}),(0,l.jsx)(d.default,{variant:"outlined",onClick:()=>{H(1),$(1,N,K)},startIcon:_?(0,l.jsx)(b.default,{size:18}):null,children:"Search"}),(0,l.jsx)(d.default,{variant:"outlined",onClick:()=>{U(""),H(1),$(1,N,"")},sx:{ml:1},children:"Clear"}),(0,l.jsx)(d.default,{variant:"outlined",onClick:()=>$(D,N,K),startIcon:_?(0,l.jsx)(b.default,{size:18}):null,children:"Refresh"}),(0,l.jsx)(d.default,{variant:"contained",sx:{ml:1},startIcon:(0,l.jsx)(k.default,{}),onClick:function(){T({name:"",code:"",hub_id:null,location:""}),I(!0)},children:"Create Site"})]})]}),(0,l.jsx)(i.default,{children:(0,l.jsx)(o.default,{children:(0,l.jsxs)(r.default,{size:"small",children:[(0,l.jsx)(f.default,{children:(0,l.jsxs)(h.default,{children:[(0,l.jsx)(c.default,{children:"ID"}),(0,l.jsx)(c.default,{children:"Code"}),(0,l.jsx)(c.default,{children:"Name"}),(0,l.jsx)(c.default,{children:"Hub"}),(0,l.jsx)(c.default,{children:"Location"}),(0,l.jsx)(c.default,{align:"right",children:"Action"})]})}),(0,l.jsx)(u.default,{children:e.map(e=>(0,l.jsxs)(h.default,{hover:!0,children:[(0,l.jsx)(c.default,{children:e.id}),(0,l.jsx)(c.default,{children:e.code||"-"}),(0,l.jsx)(c.default,{children:e.name}),(0,l.jsx)(c.default,{children:e.hub?e.hub.name:"-"}),(0,l.jsx)(c.default,{children:e.location||"-"}),(0,l.jsxs)(c.default,{align:"right",children:[(0,l.jsx)(S.default,{title:"Edit",children:(0,l.jsx)(n.default,{size:"small",onClick:()=>{T({...e,hub_id:e.hub?e.hub.id:null}),I(!0)},children:(0,l.jsx)(C.default,{fontSize:"small"})})}),(0,l.jsx)(S.default,{title:"Delete",children:(0,l.jsx)(n.default,{size:"small",color:"error",onClick:()=>W(e.id),children:(0,l.jsx)(z.default,{fontSize:"small"})})})]})]},e.id))})]})})}),(0,l.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1},children:[(0,l.jsxs)(s.default,{children:[(0,l.jsx)(d.default,{size:"small",disabled:D<=1,onClick:()=>{let e=Math.max(1,D-1);H(e),$(e,N,K)},children:"Prev"}),(0,l.jsx)(d.default,{size:"small",sx:{ml:1},disabled:N<=0||R>0&&D*N>=R,onClick:()=>{let e=D+1;H(e),$(e,N,K)},children:"Next"}),(0,l.jsxs)(s.default,{component:"span",sx:{ml:2,color:"text.secondary"},children:["Page ",D," ",R?`of ${Math.ceil(R/N)}`:""]})]}),(0,l.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,l.jsx)(s.default,{sx:{color:"text.secondary",fontSize:13},children:"Per page"}),(0,l.jsxs)(y.default,{size:"small",value:N,onChange:e=>{let l=Number(e.target.value);O(l),H(1),$(1,l,K)},children:[(0,l.jsx)(p.default,{value:10,children:"10"}),(0,l.jsx)(p.default,{value:20,children:"20"}),(0,l.jsx)(p.default,{value:50,children:"50"})]})]})]}),(0,l.jsxs)(x.default,{open:E,onClose:()=>{I(!1),T(null)},fullWidth:!0,children:[(0,l.jsx)(j.default,{children:L?.id?"Edit Site":"Create Site"}),(0,l.jsx)(m.default,{children:(0,l.jsxs)(s.default,{sx:{display:"grid",gap:2,mt:1},children:[(0,l.jsx)(g.default,{label:"Code",size:"small",value:L?.code||"",onChange:e=>T({...L,code:e.target.value})}),(0,l.jsx)(g.default,{label:"Name",size:"small",value:L?.name||"",onChange:e=>T({...L,name:e.target.value})}),(0,l.jsxs)(y.default,{size:"small",value:L?.hub_id??"",onChange:e=>T({...L,hub_id:e.target.value||null}),children:[(0,l.jsx)(p.default,{value:"",children:(0,l.jsx)("em",{children:"None"})}),M.map(e=>(0,l.jsx)(p.default,{value:e.id,children:e.name},e.id))]}),(0,l.jsx)(g.default,{label:"Location",size:"small",value:L?.location||"",onChange:e=>T({...L,location:e.target.value})})]})}),(0,l.jsxs)(v.default,{children:[(0,l.jsx)(d.default,{onClick:()=>{I(!1),T(null)},children:"Cancel"}),(0,l.jsx)(d.default,{variant:"contained",onClick:B,children:"Save"})]})]})]})}e.s(["default",()=>w])}]);