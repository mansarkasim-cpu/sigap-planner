(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3247,(e,a,l)=>{"use strict";var t=e.r(7478);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var r=t(e.r(87915)),i=e.r(14294);l.default=(0,r.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},4080,(e,a,l)=>{"use strict";var t=e.r(7478);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var r=t(e.r(87915)),i=e.r(14294);l.default=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},23708,(e,a,l)=>{"use strict";var t=e.r(7478);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var r=t(e.r(87915)),i=e.r(14294);l.default=(0,r.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add")},65250,e=>{"use strict";e.i(50382);var a=e.i(79711),l=e.i(73161),t=e.i(30878),r=e.i(30279),i=e.i(64848),o=e.i(42735),n=e.i(89136),s=e.i(14294);let d=(0,n.default)((0,s.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");var c=e.i(85537),u=e.i(30352),f=e.i(31374),p=e.i(56568),m=e.i(28569),h=e.i(27605),x=e.i(75964);function v(e){return(0,x.default)("MuiChip",e)}let g=(0,h.unstable_generateUtilityClasses)("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),b=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],y=(0,m.default)("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,a)=>{let{ownerState:l}=e,{color:t,iconColor:r,clickable:i,onDelete:o,size:n,variant:s}=l;return[{[`& .${g.avatar}`]:a.avatar},{[`& .${g.avatar}`]:a[`avatar${(0,u.default)(n)}`]},{[`& .${g.avatar}`]:a[`avatarColor${(0,u.default)(t)}`]},{[`& .${g.icon}`]:a.icon},{[`& .${g.icon}`]:a[`icon${(0,u.default)(n)}`]},{[`& .${g.icon}`]:a[`iconColor${(0,u.default)(r)}`]},{[`& .${g.deleteIcon}`]:a.deleteIcon},{[`& .${g.deleteIcon}`]:a[`deleteIcon${(0,u.default)(n)}`]},{[`& .${g.deleteIcon}`]:a[`deleteIconColor${(0,u.default)(t)}`]},{[`& .${g.deleteIcon}`]:a[`deleteIcon${(0,u.default)(s)}Color${(0,u.default)(t)}`]},a.root,a[`size${(0,u.default)(n)}`],a[`color${(0,u.default)(t)}`],i&&a.clickable,i&&"default"!==t&&a[`clickableColor${(0,u.default)(t)})`],o&&a.deletable,o&&"default"!==t&&a[`deletableColor${(0,u.default)(t)}`],a[s],a[`${s}${(0,u.default)(t)}`]]}})(({theme:e,ownerState:a})=>{let t="light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300];return(0,l.default)({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${g.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${g.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${g.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${g.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${g.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${g.icon}`]:(0,l.default)({marginLeft:5,marginRight:-6},"small"===a.size&&{fontSize:18,marginLeft:4,marginRight:-4},a.iconColor===a.color&&(0,l.default)({color:e.vars?e.vars.palette.Chip.defaultIconColor:t},"default"!==a.color&&{color:"inherit"})),[`& .${g.deleteIcon}`]:(0,l.default)({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:(0,o.alpha)(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:(0,o.alpha)(e.palette.text.primary,.4)}},"small"===a.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==a.color&&{color:e.vars?`rgba(${e.vars.palette[a.color].contrastTextChannel} / 0.7)`:(0,o.alpha)(e.palette[a.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[a.color].contrastText}})},"small"===a.size&&{height:24},"default"!==a.color&&{backgroundColor:(e.vars||e).palette[a.color].main,color:(e.vars||e).palette[a.color].contrastText},a.onDelete&&{[`&.${g.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,o.alpha)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},a.onDelete&&"default"!==a.color&&{[`&.${g.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}})},({theme:e,ownerState:a})=>(0,l.default)({},a.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,o.alpha)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${g.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:(0,o.alpha)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},a.clickable&&"default"!==a.color&&{[`&:hover, &.${g.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}}),({theme:e,ownerState:a})=>(0,l.default)({},"outlined"===a.variant&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${"light"===e.palette.mode?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${g.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${g.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${g.avatar}`]:{marginLeft:4},[`& .${g.avatarSmall}`]:{marginLeft:2},[`& .${g.icon}`]:{marginLeft:4},[`& .${g.iconSmall}`]:{marginLeft:2},[`& .${g.deleteIcon}`]:{marginRight:5},[`& .${g.deleteIconSmall}`]:{marginRight:3}},"outlined"===a.variant&&"default"!==a.color&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.7)`:(0,o.alpha)(e.palette[a.color].main,.7)}`,[`&.${g.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,o.alpha)(e.palette[a.color].main,e.palette.action.hoverOpacity)},[`&.${g.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:(0,o.alpha)(e.palette[a.color].main,e.palette.action.focusOpacity)},[`& .${g.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.7)`:(0,o.alpha)(e.palette[a.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[a.color].main}}})),$=(0,m.default)("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,a)=>{let{ownerState:l}=e,{size:t}=l;return[a.label,a[`label${(0,u.default)(t)}`]]}})(({ownerState:e})=>(0,l.default)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===e.size&&{paddingLeft:8,paddingRight:8}));function j(e){return"Backspace"===e.key||"Delete"===e.key}let C=t.forwardRef(function(e,o){let n=(0,p.default)({props:e,name:"MuiChip"}),{avatar:m,className:h,clickable:x,color:g="default",component:C,deleteIcon:S,disabled:k=!1,icon:w,label:z,onClick:I,onDelete:N,onKeyDown:R,onKeyUp:M,size:O="medium",variant:P="filled",tabIndex:W,skipFocusWhenDisabled:E=!1}=n,T=(0,a.default)(n,b),L=t.useRef(null),V=(0,c.default)(L,o),A=e=>{e.stopPropagation(),N&&N(e)},B=!1!==x&&!!I||x,D=B||N?f.default:C||"div",U=(0,l.default)({},n,{component:D,disabled:k,size:O,color:g,iconColor:t.isValidElement(w)&&w.props.color||g,onDelete:!!N,clickable:B,variant:P}),_=(e=>{let{classes:a,disabled:l,size:t,color:r,iconColor:o,onDelete:n,clickable:s,variant:d}=e,c={root:["root",d,l&&"disabled",`size${(0,u.default)(t)}`,`color${(0,u.default)(r)}`,s&&"clickable",s&&`clickableColor${(0,u.default)(r)}`,n&&"deletable",n&&`deletableColor${(0,u.default)(r)}`,`${d}${(0,u.default)(r)}`],label:["label",`label${(0,u.default)(t)}`],avatar:["avatar",`avatar${(0,u.default)(t)}`,`avatarColor${(0,u.default)(r)}`],icon:["icon",`icon${(0,u.default)(t)}`,`iconColor${(0,u.default)(o)}`],deleteIcon:["deleteIcon",`deleteIcon${(0,u.default)(t)}`,`deleteIconColor${(0,u.default)(r)}`,`deleteIcon${(0,u.default)(d)}Color${(0,u.default)(r)}`]};return(0,i.unstable_composeClasses)(c,v,a)})(U),F=D===f.default?(0,l.default)({component:C||"div",focusVisibleClassName:_.focusVisible},N&&{disableRipple:!0}):{},G=null;N&&(G=S&&t.isValidElement(S)?t.cloneElement(S,{className:(0,r.default)(S.props.className,_.deleteIcon),onClick:A}):(0,s.jsx)(d,{className:(0,r.default)(_.deleteIcon),onClick:A}));let H=null;m&&t.isValidElement(m)&&(H=t.cloneElement(m,{className:(0,r.default)(_.avatar,m.props.className)}));let K=null;return w&&t.isValidElement(w)&&(K=t.cloneElement(w,{className:(0,r.default)(_.icon,w.props.className)})),(0,s.jsxs)(y,(0,l.default)({as:D,className:(0,r.default)(_.root,h),disabled:!!B&&!!k||void 0,onClick:I,onKeyDown:e=>{e.currentTarget===e.target&&j(e)&&e.preventDefault(),R&&R(e)},onKeyUp:e=>{e.currentTarget===e.target&&(N&&j(e)?N(e):"Escape"===e.key&&L.current&&L.current.blur()),M&&M(e)},ref:V,tabIndex:E&&k?-1:W,ownerState:U},F,T,{children:[H||K,(0,s.jsx)($,{className:(0,r.default)(_.label),ownerState:U,children:z}),G]}))});e.s(["default",0,C],65250)},56997,e=>{"use strict";e.i(50382);var a=e.i(79711),l=e.i(73161),t=e.i(30878),r=e.i(30279),i=e.i(37029),o=e.i(2880),n=e.i(64848),s=e.i(28569),d=e.i(56568),c=e.i(3108);let u=t.createContext();var f=e.i(27605),p=e.i(75964);function m(e){return(0,p.default)("MuiGrid",e)}let h=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],x=(0,f.unstable_generateUtilityClasses)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map(e=>`spacing-xs-${e}`),...["column-reverse","column","row-reverse","row"].map(e=>`direction-xs-${e}`),...["nowrap","wrap-reverse","wrap"].map(e=>`wrap-xs-${e}`),...h.map(e=>`grid-xs-${e}`),...h.map(e=>`grid-sm-${e}`),...h.map(e=>`grid-md-${e}`),...h.map(e=>`grid-lg-${e}`),...h.map(e=>`grid-xl-${e}`)]);var v=e.i(14294);let g=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function b(e){let a=parseFloat(e);return`${a}${String(e).replace(String(a),"")||"px"}`}function y({breakpoints:e,values:a}){let l="";Object.keys(a).forEach(e=>{""===l&&0!==a[e]&&(l=e)});let t=Object.keys(e).sort((a,l)=>e[a]-e[l]);return t.slice(0,t.indexOf(l))}let $=(0,s.default)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,a)=>{let{ownerState:l}=e,{container:t,direction:r,item:i,spacing:o,wrap:n,zeroMinWidth:s,breakpoints:d}=l,c=[];t&&(c=function(e,a,l={}){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[l[`spacing-xs-${String(e)}`]];let t=[];return a.forEach(a=>{let r=e[a];Number(r)>0&&t.push(l[`spacing-${a}-${String(r)}`])}),t}(o,d,a));let u=[];return d.forEach(e=>{let t=l[e];t&&u.push(a[`grid-${e}-${String(t)}`])}),[a.root,t&&a.container,i&&a.item,s&&a.zeroMinWidth,...c,"row"!==r&&a[`direction-xs-${String(r)}`],"wrap"!==n&&a[`wrap-xs-${String(n)}`],...u]}})(({ownerState:e})=>(0,l.default)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"wrap"!==e.wrap&&{flexWrap:e.wrap}),function({theme:e,ownerState:a}){let l=(0,o.resolveBreakpointValues)({values:a.direction,breakpoints:e.breakpoints.values});return(0,o.handleBreakpoints)({theme:e},l,e=>{let a={flexDirection:e};return 0===e.indexOf("column")&&(a[`& > .${x.item}`]={maxWidth:"none"}),a})},function({theme:e,ownerState:a}){let{container:l,rowSpacing:t}=a,r={};if(l&&0!==t){let a,l=(0,o.resolveBreakpointValues)({values:t,breakpoints:e.breakpoints.values});"object"==typeof l&&(a=y({breakpoints:e.breakpoints.values,values:l})),r=(0,o.handleBreakpoints)({theme:e},l,(l,t)=>{var r;let i=e.spacing(l);return"0px"!==i?{marginTop:`-${b(i)}`,[`& > .${x.item}`]:{paddingTop:b(i)}}:null!=(r=a)&&r.includes(t)?{}:{marginTop:0,[`& > .${x.item}`]:{paddingTop:0}}})}return r},function({theme:e,ownerState:a}){let{container:l,columnSpacing:t}=a,r={};if(l&&0!==t){let a,l=(0,o.resolveBreakpointValues)({values:t,breakpoints:e.breakpoints.values});"object"==typeof l&&(a=y({breakpoints:e.breakpoints.values,values:l})),r=(0,o.handleBreakpoints)({theme:e},l,(l,t)=>{var r;let i=e.spacing(l);return"0px"!==i?{width:`calc(100% + ${b(i)})`,marginLeft:`-${b(i)}`,[`& > .${x.item}`]:{paddingLeft:b(i)}}:null!=(r=a)&&r.includes(t)?{}:{width:"100%",marginLeft:0,[`& > .${x.item}`]:{paddingLeft:0}}})}return r},function({theme:e,ownerState:a}){let t;return e.breakpoints.keys.reduce((r,i)=>{let n={};if(a[i]&&(t=a[i]),!t)return r;if(!0===t)n={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===t)n={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{let s=(0,o.resolveBreakpointValues)({values:a.columns,breakpoints:e.breakpoints.values}),d="object"==typeof s?s[i]:s;if(null==d)return r;let c=`${Math.round(t/d*1e8)/1e6}%`,u={};if(a.container&&a.item&&0!==a.columnSpacing){let l=e.spacing(a.columnSpacing);if("0px"!==l){let e=`calc(${c} + ${b(l)})`;u={flexBasis:e,maxWidth:e}}}n=(0,l.default)({flexBasis:c,flexGrow:0,maxWidth:c},u)}return 0===e.breakpoints.values[i]?Object.assign(r,n):r[e.breakpoints.up(i)]=n,r},{})}),j=t.forwardRef(function(e,o){let s=(0,d.default)({props:e,name:"MuiGrid"}),{breakpoints:f}=(0,c.default)(),p=(0,i.unstable_extendSxProp)(s),{className:h,columns:x,columnSpacing:b,component:y="div",container:j=!1,direction:C="row",item:S=!1,rowSpacing:k,spacing:w=0,wrap:z="wrap",zeroMinWidth:I=!1}=p,N=(0,a.default)(p,g),R=k||w,M=b||w,O=t.useContext(u),P=j?x||12:O,W={},E=(0,l.default)({},N);f.keys.forEach(e=>{null!=N[e]&&(W[e]=N[e],delete E[e])});let T=(0,l.default)({},p,{columns:P,container:j,direction:C,item:S,rowSpacing:R,columnSpacing:M,wrap:z,zeroMinWidth:I,spacing:w},W,{breakpoints:f.keys}),L=(e=>{let{classes:a,container:l,direction:t,item:r,spacing:i,wrap:o,zeroMinWidth:s,breakpoints:d}=e,c=[];l&&(c=function(e,a){if(!e||e<=0)return[];if("string"==typeof e&&!Number.isNaN(Number(e))||"number"==typeof e)return[`spacing-xs-${String(e)}`];let l=[];return a.forEach(a=>{let t=e[a];if(Number(t)>0){let e=`spacing-${a}-${String(t)}`;l.push(e)}}),l}(i,d));let u=[];d.forEach(a=>{let l=e[a];l&&u.push(`grid-${a}-${String(l)}`)});let f={root:["root",l&&"container",r&&"item",s&&"zeroMinWidth",...c,"row"!==t&&`direction-xs-${String(t)}`,"wrap"!==o&&`wrap-xs-${String(o)}`,...u]};return(0,n.unstable_composeClasses)(f,m,a)})(T);return(0,v.jsx)(u.Provider,{value:P,children:(0,v.jsx)($,(0,l.default)({ownerState:T,className:(0,r.default)(L.root,h),as:y,ref:o},E))})});e.s(["default",0,j],56997)},23916,e=>{"use strict";var a=e.i(14294),l=e.i(30878),t=e.i(23703),r=e.i(88627),i=e.i(56997),o=e.i(28960),n=e.i(60152),s=e.i(22921),d=e.i(71606),c=e.i(70993),u=e.i(26066),f=e.i(85421),p=e.i(1138),m=e.i(71666),h=e.i(73509),x=e.i(12744),v=e.i(95013),g=e.i(77678),b=e.i(91962),y=e.i(14067),$=e.i(87695),j=e.i(73743),C=e.i(66769),S=e.i(65250),k=e.i(1083),w=e.i(61609),z=e.i(3247),I=e.i(4080),N=e.i(23708);function R(){let[e,R]=(0,l.useState)([]),[M,O]=(0,l.useState)(!1),[P,W]=(0,l.useState)(null),[E,T]=(0,l.useState)([]),[L,V]=(0,l.useState)([]),A=Array.from(new Set(["admin","planner","lead_shift","technician",...E||[]])),[B,D]=(0,l.useState)(""),[U,_]=(0,l.useState)(""),[F,G]=(0,l.useState)(""),[H,K]=(0,l.useState)(1),[q,J]=(0,l.useState)(10),[Q,X]=(0,l.useState)(null),[Y,Z]=(0,l.useState)(null),[ee,ea]=(0,l.useState)(!1);async function el(){O(!0),W(null);try{let e=new URLSearchParams;F&&e.set("q",F),B&&e.set("role",B),U&&e.set("site",U),e.set("page",String(H)),e.set("pageSize",String(q));let a="/users"+(e.toString()?`?${e.toString()}`:""),l=await (0,t.default)(a);if(Array.isArray(l))R(l),X(null);else if(l?.data)R(l.data||[]),X(l.meta&&Number(l.meta.total)||0),l.meta?.page&&K(Number(l.meta.page)),l.meta?.pageSize&&J(Number(l.meta.pageSize));else{let e=l??[];R(Array.isArray(e)?e:[]),X(null)}let r=Array.from(new Set((l?.data||l||[]).map(e=>e.role).filter(Boolean))),i=Array.from(new Set((l?.data||l||[]).map(e=>e.site).filter(Boolean)));T(r),V(i)}catch(e){console.error("load users",e),W(e?.message||"Failed to load users")}finally{O(!1)}}async function et(){if(Y)try{if(!Y.name||!Y.nipp)return alert("Name and NIPP are required");if(!Y.id&&!Y.password)return alert("Password is required for new users");Y.id?await (0,t.default)(`/users/${encodeURIComponent(Y.id)}`,{method:"PATCH",body:Y}):await (0,t.default)("/users",{method:"POST",body:Y}),ea(!1),Z(null),K(1),await el()}catch(e){alert(e?.body?.message||e?.message||"Save failed")}}async function er(e){if(confirm("Hapus user ini?"))try{await (0,t.default)(`/users/${encodeURIComponent(e)}`,{method:"DELETE"}),await el()}catch(e){alert(e?.body?.message||e?.message||"Delete failed")}}return(0,l.useEffect)(()=>{el()},[B,U,F,H,q]),(0,a.jsxs)(r.default,{sx:{p:2},children:[(0,a.jsxs)(r.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,a.jsxs)(r.default,{children:[(0,a.jsx)(r.default,{component:"h2",sx:{m:0},children:"Users"}),(0,a.jsx)(r.default,{sx:{color:"text.secondary",fontSize:13},children:"Manage application users"})]}),(0,a.jsxs)(r.default,{sx:{display:"flex",gap:1},children:[(0,a.jsx)(n.default,{variant:"outlined",color:"inherit",onClick:el,startIcon:M?(0,a.jsx)(k.default,{size:18}):null,children:"Refresh"}),(0,a.jsx)(n.default,{variant:"contained",startIcon:(0,a.jsx)(N.default,{}),onClick:function(){Z({name:"",email:"",role:"technician",site:"",nipp:"",password:""}),ea(!0)},children:"Create User"})]})]}),(0,a.jsx)(o.default,{sx:{p:2,mb:2},elevation:1,children:(0,a.jsxs)(i.default,{container:!0,spacing:2,alignItems:"center",children:[(0,a.jsx)(i.default,{item:!0,xs:12,md:5,children:(0,a.jsx)(d.default,{fullWidth:!0,placeholder:"Search name or email",value:F,onChange:e=>G(e.target.value),size:"small"})}),(0,a.jsx)(i.default,{item:!0,xs:6,md:3,children:(0,a.jsxs)(u.default,{fullWidth:!0,size:"small",children:[(0,a.jsx)(f.default,{children:"Role"}),(0,a.jsxs)(p.default,{label:"Role",value:B,onChange:e=>D(e.target.value),children:[(0,a.jsx)(c.default,{value:"",children:(0,a.jsx)("em",{children:"All roles"})}),A.map(e=>(0,a.jsx)(c.default,{value:e,children:e},e))]})]})}),(0,a.jsx)(i.default,{item:!0,xs:6,md:2,children:(0,a.jsxs)(u.default,{fullWidth:!0,size:"small",children:[(0,a.jsx)(f.default,{children:"Site"}),(0,a.jsxs)(p.default,{label:"Site",value:U,onChange:e=>_(e.target.value),children:[(0,a.jsx)(c.default,{value:"",children:(0,a.jsx)("em",{children:"All sites"})}),L.map(e=>(0,a.jsx)(c.default,{value:e,children:e},e))]})]})}),(0,a.jsx)(i.default,{item:!0,xs:12,md:2,children:(0,a.jsx)(n.default,{fullWidth:!0,variant:"contained",onClick:el,children:"Apply"})})]})}),(0,a.jsxs)(o.default,{elevation:1,children:[(0,a.jsx)(v.default,{children:(0,a.jsxs)(m.default,{size:"small",children:[(0,a.jsx)(g.default,{children:(0,a.jsxs)(b.default,{children:[(0,a.jsx)(x.default,{children:"Name"}),(0,a.jsx)(x.default,{children:"NIPP"}),(0,a.jsx)(x.default,{children:"Email"}),(0,a.jsx)(x.default,{children:"Role"}),(0,a.jsx)(x.default,{children:"Site"}),(0,a.jsx)(x.default,{align:"right",children:"Action"})]})}),(0,a.jsx)(h.default,{children:e.map(e=>(0,a.jsxs)(b.default,{hover:!0,children:[(0,a.jsx)(x.default,{children:e.name}),(0,a.jsx)(x.default,{children:e.nipp??"-"}),(0,a.jsx)(x.default,{sx:{maxWidth:220,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.email}),(0,a.jsx)(x.default,{children:(0,a.jsx)(S.default,{label:e.role||"-",size:"small",color:"admin"===e.role?"primary":"default"})}),(0,a.jsx)(x.default,{children:e.site??"-"}),(0,a.jsx)(x.default,{align:"right",children:(0,a.jsxs)(r.default,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:1},children:[(0,a.jsx)(w.default,{title:"Edit",children:(0,a.jsx)(s.default,{size:"small",onClick:()=>{Z(e),ea(!0)},children:(0,a.jsx)(z.default,{fontSize:"small"})})}),(0,a.jsx)(w.default,{title:"Delete",children:(0,a.jsx)(s.default,{size:"small",color:"error",onClick:()=>er(e.id),children:(0,a.jsx)(I.default,{fontSize:"small"})})})]})})]},e.id))})]})}),M&&(0,a.jsx)(r.default,{sx:{p:2,display:"flex",justifyContent:"center"},children:(0,a.jsx)(k.default,{})}),P&&(0,a.jsx)(r.default,{sx:{p:2,color:"error.main"},children:String(P)})]}),(0,a.jsxs)(r.default,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsx)(r.default,{children:null!==Q&&(0,a.jsxs)(r.default,{sx:{color:"text.secondary"},children:["Showing ",Math.min((H-1)*q+1,Q)||0," - ",Math.min(H*q,Q)," of ",Q]})}),(0,a.jsxs)(r.default,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,a.jsx)(n.default,{size:"small",variant:"outlined",onClick:()=>{H>1&&K(e=>e-1)},disabled:H<=1,children:"Prev"}),(0,a.jsxs)(r.default,{children:["Page ",H]}),(0,a.jsx)(n.default,{size:"small",variant:"outlined",onClick:()=>{null===Q?K(e=>e+1):H*q<Q&&K(e=>e+1)},disabled:null!==Q&&H*q>=Q,children:"Next"}),(0,a.jsx)(u.default,{size:"small",sx:{minWidth:100},children:(0,a.jsx)(p.default,{value:q,onChange:e=>{J(Number(e.target.value)),K(1)},children:[10,25,50,100].map(e=>(0,a.jsxs)(c.default,{value:e,children:[e," / page"]},e))})})]})]}),(0,a.jsxs)(y.default,{open:ee,onClose:()=>{ea(!1),Z(null)},fullWidth:!0,maxWidth:"sm",children:[(0,a.jsx)($.default,{children:Y?.id?"Edit User":"Create User"}),(0,a.jsx)(j.default,{dividers:!0,children:(0,a.jsxs)(i.default,{container:!0,spacing:2,sx:{pt:0},children:[(0,a.jsx)(i.default,{item:!0,xs:12,children:(0,a.jsx)(d.default,{label:"Name",fullWidth:!0,size:"small",value:Y?.name||"",onChange:e=>Z({...Y,name:e.target.value})})}),(0,a.jsx)(i.default,{item:!0,xs:12,md:6,children:(0,a.jsx)(d.default,{label:"NIPP",fullWidth:!0,size:"small",value:Y?.nipp||"",onChange:e=>Z({...Y,nipp:e.target.value})})}),(0,a.jsx)(i.default,{item:!0,xs:12,md:6,children:(0,a.jsx)(d.default,{label:"Email",fullWidth:!0,size:"small",value:Y?.email||"",onChange:e=>Z({...Y,email:e.target.value})})}),(0,a.jsx)(i.default,{item:!0,xs:12,md:6,children:(0,a.jsx)(d.default,{label:"Password",type:"password",fullWidth:!0,size:"small",value:Y?.password||"",onChange:e=>Z({...Y,password:e.target.value})})}),(0,a.jsx)(i.default,{item:!0,xs:12,md:6,children:(0,a.jsxs)(u.default,{fullWidth:!0,size:"small",children:[(0,a.jsx)(f.default,{children:"Role"}),(0,a.jsx)(p.default,{label:"Role",value:Y?.role||"",onChange:e=>Z({...Y,role:e.target.value}),children:A.map(e=>(0,a.jsx)(c.default,{value:e,children:e},e))})]})}),(0,a.jsx)(i.default,{item:!0,xs:12,md:6,children:(0,a.jsx)(d.default,{label:"Site",fullWidth:!0,size:"small",value:Y?.site||"",onChange:e=>Z({...Y,site:e.target.value})})})]})}),(0,a.jsxs)(C.default,{children:[(0,a.jsx)(n.default,{onClick:()=>{ea(!1),Z(null)},children:"Cancel"}),(0,a.jsx)(n.default,{variant:"contained",onClick:et,children:Y?.id?"Save":"Create"})]})]})]})}e.s(["default",()=>R])}]);