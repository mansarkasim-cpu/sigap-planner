module.exports=[82906,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(59165),e=a.i(62205),f=a.i(9098),g=a.i(61981),h=a.i(89280),i=a.i(6771),j=a.i(55806),k=a.i(34122),l=a.i(3683),m=a.i(48154),n=a.i(81777),o=a.i(62104),p=a.i(32775),q=a.i(45117),r=a.i(11338),s=a.i(13874),t=a.i(13541),u=a.i(8607),v=a.i(21712),w=a.i(26281),x=a.i(17708),y=a.i(60750),z=a.i(6845);function A(){let[a,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)(1),[N,O]=(0,c.useState)(20),[P,Q]=(0,c.useState)(0),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(null);async function X(a=L,b=N,c=R){G(!0);try{let e=new URLSearchParams;c&&e.set("q",c),a&&e.set("page",String(a)),b&&e.set("pageSize",String(b)),T&&e.set("jenis_alat_id",String(T)),V&&e.set("site_id",String(V));let f=await (0,d.default)("/master/alats?"+e.toString());Array.isArray(f)?(A(f),Q(0)):(A(f.data||[]),Q(f.meta?.total||0),M(f.meta?.page||a),O(f.meta?.pageSize||b))}catch(a){console.error(a),alert(a?.body?.message||a?.message||"Load failed")}finally{G(!1)}}async function Y(){try{let a=await (0,d.default)("/master/jenis-alat");C(Array.isArray(a)?a:[]);let b=await (0,d.default)("/master/sites");E(Array.isArray(b)?b:[])}catch(a){console.error(a)}}async function Z(){if(!J||!J.nama)return alert("Nama required");if(!J.jenis_alat_id)return alert("jenis_alat_id required");try{J.id?await (0,d.default)(`/master/alats/${J.id}`,{method:"PATCH",body:J}):await (0,d.default)("/master/alats",{method:"POST",body:J}),I(!1),K(null),await X()}catch(a){alert(a?.body?.message||a?.message||"Save failed")}}async function $(a){if(confirm("Hapus alat?"))try{await (0,d.default)(`/master/alats/${a}`,{method:"DELETE"}),await X()}catch(a){alert(a?.body?.message||a?.message||"Delete failed")}}return(0,c.useEffect)(()=>{X(),Y()},[]),(0,b.jsxs)(e.default,{sx:{p:2},children:[(0,b.jsxs)(e.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,b.jsxs)(e.default,{children:[(0,b.jsx)(e.default,{component:"h2",sx:{m:0},children:"Alat"}),(0,b.jsx)(e.default,{sx:{color:"text.secondary",fontSize:13},children:"Manage equipment instances"})]}),(0,b.jsxs)(e.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,b.jsxs)(t.default,{size:"small",value:T??"",onChange:a=>{U(a.target.value||null),M(1),X(1,N)},displayEmpty:!0,sx:{minWidth:160},children:[(0,b.jsx)(u.default,{value:"",children:(0,b.jsx)("em",{children:"All Jenis"})}),B.map(a=>(0,b.jsx)(u.default,{value:a.id,children:a.nama},a.id))]}),(0,b.jsxs)(t.default,{size:"small",value:V??"",onChange:a=>{W(a.target.value||null),M(1),X(1,N)},displayEmpty:!0,sx:{minWidth:160},children:[(0,b.jsx)(u.default,{value:"",children:(0,b.jsx)("em",{children:"All Sites"})}),D.map(a=>(0,b.jsx)(u.default,{value:a.id,children:a.name},a.id))]}),(0,b.jsx)(s.default,{size:"small",placeholder:"Search",value:R,onChange:a=>S(a.target.value),onKeyDown:a=>{"Enter"===a.key&&(M(1),X(1,N,a.target.value))}}),(0,b.jsx)(g.default,{variant:"outlined",onClick:()=>{M(1),X(1,N,R)},startIcon:F?(0,b.jsx)(v.default,{size:18}):null,children:"Search"}),(0,b.jsx)(g.default,{variant:"outlined",onClick:()=>{S(""),U(null),W(null),M(1),X(1,N,"")},sx:{ml:1},children:"Clear"}),(0,b.jsx)(g.default,{variant:"outlined",onClick:()=>X(L,N,R),startIcon:F?(0,b.jsx)(v.default,{size:18}):null,children:"Refresh"}),(0,b.jsx)(g.default,{variant:"contained",sx:{ml:1},startIcon:(0,b.jsx)(z.default,{}),onClick:function(){K({nama:"",kode:"",serial_no:"",jenis_alat_id:null,site_id:null,notes:""}),I(!0)},children:"Create Alat"})]})]}),(0,b.jsx)(f.default,{children:(0,b.jsx)(l.default,{children:(0,b.jsxs)(i.default,{size:"small",children:[(0,b.jsx)(m.default,{children:(0,b.jsxs)(n.default,{children:[(0,b.jsx)(k.default,{children:"ID"}),(0,b.jsx)(k.default,{children:"Nama"}),(0,b.jsx)(k.default,{children:"Jenis"}),(0,b.jsx)(k.default,{children:"Site"}),(0,b.jsx)(k.default,{children:"Serial/Kode"}),(0,b.jsx)(k.default,{align:"right",children:"Action"})]})}),(0,b.jsx)(j.default,{children:a.map(a=>(0,b.jsxs)(n.default,{hover:!0,children:[(0,b.jsx)(k.default,{children:a.id}),(0,b.jsx)(k.default,{children:a.nama}),(0,b.jsx)(k.default,{children:a.jenis_alat?a.jenis_alat.nama:"-"}),(0,b.jsx)(k.default,{children:a.site?a.site.name:"-"}),(0,b.jsx)(k.default,{children:a.kode||a.serial_no||"-"}),(0,b.jsxs)(k.default,{align:"right",children:[(0,b.jsx)(w.default,{title:"Edit",children:(0,b.jsx)(h.default,{size:"small",onClick:()=>{K({...a,jenis_alat_id:a.jenis_alat?a.jenis_alat.id:null,site_id:a.site?a.site.id:null}),I(!0)},children:(0,b.jsx)(x.default,{fontSize:"small"})})}),(0,b.jsx)(w.default,{title:"Delete",children:(0,b.jsx)(h.default,{size:"small",color:"error",onClick:()=>$(a.id),children:(0,b.jsx)(y.default,{fontSize:"small"})})})]})]},a.id))})]})})}),(0,b.jsxs)(e.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1},children:[(0,b.jsxs)(e.default,{children:[(0,b.jsx)(g.default,{size:"small",disabled:L<=1,onClick:()=>{let a=Math.max(1,L-1);M(a),X(a,N,R)},children:"Prev"}),(0,b.jsx)(g.default,{size:"small",sx:{ml:1},disabled:N<=0||P>0&&L*N>=P,onClick:()=>{let a=L+1;M(a),X(a,N,R)},children:"Next"}),(0,b.jsxs)(e.default,{component:"span",sx:{ml:2,color:"text.secondary"},children:["Page ",L," ",P?`of ${Math.ceil(P/N)}`:""]})]}),(0,b.jsxs)(e.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,b.jsx)(e.default,{sx:{color:"text.secondary",fontSize:13},children:"Per page"}),(0,b.jsxs)(t.default,{size:"small",value:N,onChange:a=>{let b=Number(a.target.value);O(b),M(1),X(1,b,R)},children:[(0,b.jsx)(u.default,{value:10,children:"10"}),(0,b.jsx)(u.default,{value:20,children:"20"}),(0,b.jsx)(u.default,{value:50,children:"50"})]})]})]}),(0,b.jsxs)(o.default,{open:H,onClose:()=>{I(!1),K(null)},fullWidth:!0,children:[(0,b.jsx)(p.default,{children:J?.id?"Edit Alat":"Create Alat"}),(0,b.jsx)(q.default,{children:(0,b.jsxs)(e.default,{sx:{display:"grid",gap:2,mt:1},children:[(0,b.jsx)(s.default,{label:"Nama",size:"small",value:J?.nama||"",onChange:a=>K({...J,nama:a.target.value})}),(0,b.jsx)(s.default,{label:"Kode",size:"small",value:J?.kode||"",onChange:a=>K({...J,kode:a.target.value})}),(0,b.jsx)(s.default,{label:"Serial No",size:"small",value:J?.serial_no||"",onChange:a=>K({...J,serial_no:a.target.value})}),(0,b.jsxs)(t.default,{size:"small",value:J?.jenis_alat_id??"",onChange:a=>K({...J,jenis_alat_id:a.target.value||null}),children:[(0,b.jsx)(u.default,{value:"",children:(0,b.jsx)("em",{children:"Select jenis"})}),B.map(a=>(0,b.jsx)(u.default,{value:a.id,children:a.nama},a.id))]}),(0,b.jsxs)(t.default,{size:"small",value:J?.site_id??"",onChange:a=>K({...J,site_id:a.target.value||null}),children:[(0,b.jsx)(u.default,{value:"",children:(0,b.jsx)("em",{children:"None"})}),D.map(a=>(0,b.jsx)(u.default,{value:a.id,children:a.name},a.id))]}),(0,b.jsx)(s.default,{label:"Notes",size:"small",multiline:!0,minRows:2,value:J?.notes||"",onChange:a=>K({...J,notes:a.target.value})})]})}),(0,b.jsxs)(r.default,{children:[(0,b.jsx)(g.default,{onClick:()=>{I(!1),K(null)},children:"Cancel"}),(0,b.jsx)(g.default,{variant:"contained",onClick:Z,children:"Save"})]})]})]})}a.s(["default",()=>A])}];

//# sourceMappingURL=web_app_master_alats_page_jsx_7d2aaa1f._.js.map