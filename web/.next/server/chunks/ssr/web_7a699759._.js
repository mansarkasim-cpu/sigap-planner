module.exports=[25344,a=>{"use strict";var b=a.i(41414),c=a.i(19916),d=a.i(55132),e=a.i(70219),f=a.i(97577),g=a.i(9645),h=a.i(49945),i=a.i(45481),j=a.i(52283),k=a.i(1579);let l=d.createContext();var m=a.i(55980),n=a.i(14220);function o(a){return(0,n.default)("MuiGrid",a)}let p=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],q=(0,m.unstable_generateUtilityClasses)("MuiGrid",["root","container","item","zeroMinWidth",...[0,1,2,3,4,5,6,7,8,9,10].map(a=>`spacing-xs-${a}`),...["column-reverse","column","row-reverse","row"].map(a=>`direction-xs-${a}`),...["nowrap","wrap-reverse","wrap"].map(a=>`wrap-xs-${a}`),...p.map(a=>`grid-xs-${a}`),...p.map(a=>`grid-sm-${a}`),...p.map(a=>`grid-md-${a}`),...p.map(a=>`grid-lg-${a}`),...p.map(a=>`grid-xl-${a}`)]);var r=a.i(56856);let s=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function t(a){let b=parseFloat(a);return`${b}${String(a).replace(String(b),"")||"px"}`}function u({breakpoints:a,values:b}){let c="";Object.keys(b).forEach(a=>{""===c&&0!==b[a]&&(c=a)});let d=Object.keys(a).sort((b,c)=>a[b]-a[c]);return d.slice(0,d.indexOf(c))}let v=(0,i.default)("div",{name:"MuiGrid",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a,{container:d,direction:e,item:f,spacing:g,wrap:h,zeroMinWidth:i,breakpoints:j}=c,k=[];d&&(k=function(a,b,c={}){if(!a||a<=0)return[];if("string"==typeof a&&!Number.isNaN(Number(a))||"number"==typeof a)return[c[`spacing-xs-${String(a)}`]];let d=[];return b.forEach(b=>{let e=a[b];Number(e)>0&&d.push(c[`spacing-${b}-${String(e)}`])}),d}(g,j,b));let l=[];return j.forEach(a=>{let d=c[a];d&&l.push(b[`grid-${a}-${String(d)}`])}),[b.root,d&&b.container,f&&b.item,i&&b.zeroMinWidth,...k,"row"!==e&&b[`direction-xs-${String(e)}`],"wrap"!==h&&b[`wrap-xs-${String(h)}`],...l]}})(({ownerState:a})=>(0,c.default)({boxSizing:"border-box"},a.container&&{display:"flex",flexWrap:"wrap",width:"100%"},a.item&&{margin:0},a.zeroMinWidth&&{minWidth:0},"wrap"!==a.wrap&&{flexWrap:a.wrap}),function({theme:a,ownerState:b}){let c=(0,g.resolveBreakpointValues)({values:b.direction,breakpoints:a.breakpoints.values});return(0,g.handleBreakpoints)({theme:a},c,a=>{let b={flexDirection:a};return 0===a.indexOf("column")&&(b[`& > .${q.item}`]={maxWidth:"none"}),b})},function({theme:a,ownerState:b}){let{container:c,rowSpacing:d}=b,e={};if(c&&0!==d){let b,c=(0,g.resolveBreakpointValues)({values:d,breakpoints:a.breakpoints.values});"object"==typeof c&&(b=u({breakpoints:a.breakpoints.values,values:c})),e=(0,g.handleBreakpoints)({theme:a},c,(c,d)=>{var e;let f=a.spacing(c);return"0px"!==f?{marginTop:`-${t(f)}`,[`& > .${q.item}`]:{paddingTop:t(f)}}:null!=(e=b)&&e.includes(d)?{}:{marginTop:0,[`& > .${q.item}`]:{paddingTop:0}}})}return e},function({theme:a,ownerState:b}){let{container:c,columnSpacing:d}=b,e={};if(c&&0!==d){let b,c=(0,g.resolveBreakpointValues)({values:d,breakpoints:a.breakpoints.values});"object"==typeof c&&(b=u({breakpoints:a.breakpoints.values,values:c})),e=(0,g.handleBreakpoints)({theme:a},c,(c,d)=>{var e;let f=a.spacing(c);return"0px"!==f?{width:`calc(100% + ${t(f)})`,marginLeft:`-${t(f)}`,[`& > .${q.item}`]:{paddingLeft:t(f)}}:null!=(e=b)&&e.includes(d)?{}:{width:"100%",marginLeft:0,[`& > .${q.item}`]:{paddingLeft:0}}})}return e},function({theme:a,ownerState:b}){let d;return a.breakpoints.keys.reduce((e,f)=>{let h={};if(b[f]&&(d=b[f]),!d)return e;if(!0===d)h={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===d)h={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{let i=(0,g.resolveBreakpointValues)({values:b.columns,breakpoints:a.breakpoints.values}),j="object"==typeof i?i[f]:i;if(null==j)return e;let k=`${Math.round(d/j*1e8)/1e6}%`,l={};if(b.container&&b.item&&0!==b.columnSpacing){let c=a.spacing(b.columnSpacing);if("0px"!==c){let a=`calc(${k} + ${t(c)})`;l={flexBasis:a,maxWidth:a}}}h=(0,c.default)({flexBasis:k,flexGrow:0,maxWidth:k},l)}return 0===a.breakpoints.values[f]?Object.assign(e,h):e[a.breakpoints.up(f)]=h,e},{})}),w=d.forwardRef(function(a,g){let i=(0,j.default)({props:a,name:"MuiGrid"}),{breakpoints:m}=(0,k.default)(),n=(0,f.unstable_extendSxProp)(i),{className:p,columns:q,columnSpacing:t,component:u="div",container:w=!1,direction:x="row",item:y=!1,rowSpacing:z,spacing:A=0,wrap:B="wrap",zeroMinWidth:C=!1}=n,D=(0,b.default)(n,s),E=z||A,F=t||A,G=d.useContext(l),H=w?q||12:G,I={},J=(0,c.default)({},D);m.keys.forEach(a=>{null!=D[a]&&(I[a]=D[a],delete J[a])});let K=(0,c.default)({},n,{columns:H,container:w,direction:x,item:y,rowSpacing:E,columnSpacing:F,wrap:B,zeroMinWidth:C,spacing:A},I,{breakpoints:m.keys}),L=(a=>{let{classes:b,container:c,direction:d,item:e,spacing:f,wrap:g,zeroMinWidth:i,breakpoints:j}=a,k=[];c&&(k=function(a,b){if(!a||a<=0)return[];if("string"==typeof a&&!Number.isNaN(Number(a))||"number"==typeof a)return[`spacing-xs-${String(a)}`];let c=[];return b.forEach(b=>{let d=a[b];if(Number(d)>0){let a=`spacing-${b}-${String(d)}`;c.push(a)}}),c}(f,j));let l=[];j.forEach(b=>{let c=a[b];c&&l.push(`grid-${b}-${String(c)}`)});let m={root:["root",c&&"container",e&&"item",i&&"zeroMinWidth",...k,"row"!==d&&`direction-xs-${String(d)}`,"wrap"!==g&&`wrap-xs-${String(g)}`,...l]};return(0,h.unstable_composeClasses)(m,o,b)})(K);return(0,r.jsx)(l.Provider,{value:H,children:(0,r.jsx)(v,(0,c.default)({ownerState:K,className:(0,e.default)(L.root,p),as:u,ref:g},J))})});a.s(["default",0,w],25344)},50150,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(62205),e=a.i(9098),f=a.i(25344),g=a.i(45389),h=a.i(36539),i=a.i(40972),j=a.i(87449),k=a.i(13121),l=a.i(61981),m=a.i(13874),n=a.i(28683),o=a.i(59165);function p(a){let b=new Date(a);return isNaN(b.getTime())?"":`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`}function q(){let a=(0,c.useMemo)(()=>{let a=new Date;return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`},[]),[q,r]=(0,c.useState)(a),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)({}),[w,x]=(0,c.useState)({});async function y(){t(!0);try{let a=(await (0,o.default)("/assignments")||[]).filter(a=>{let b=a.scheduledAt||a.wo&&a.wo.start_date||a.startedAt||a.createdAt||null;return!!b&&p(b)===q});try{let b=await (0,o.default)("/work-orders?page=1&pageSize=2000"),c=((b?.data??b??[])||[]).filter(a=>{let b=a.start_date||a.raw?.start_date||null;if(!b)return!1;let c=p(b)===q,d="DEPLOYED"===String(a.status||a.raw&&a.raw.status||"").toUpperCase();return c&&!d}).map(a=>{let b=[];try{for(let c of a.raw&&Array.isArray(a.raw.labours)?a.raw.labours:a.raw&&Array.isArray(a.raw.labors)?a.raw.labors:[])for(let a of c&&Array.isArray(c.personils)?c.personils:c&&Array.isArray(c.personnel)?c.personnel:[]){let c=a?.personil?.name||a?.name||a?.personil?.displayName||null,d=a?.nipp||a?.nip||a?.personil?.nip||null;c?b.push(c):d&&b.push(String(d))}}catch(a){}return{id:`wo-${a.id}`,wo:a,assigneeId:void 0,scheduledAt:a.start_date||a.raw?.start_date||null,task_name:null,createdAt:a.createdAt||null,assignedNames:b,deployed:!1}}),d=new Set(a.map(a=>a.wo&&a.wo.id?String(a.wo.id):a.id));for(let b of c){let c=b.wo&&b.wo.id?String(b.wo.id):b.id;d.has(c)||a.push(b)}}catch(a){console.warn("failed to load workorders for monitor",a)}let b=Array.from(new Set(a.map(a=>a.assigneeId).filter(Boolean))),c={...w};for(let a of b)if(!c[a])try{let b=await (0,o.default)(`/users/${encodeURIComponent(a)}`);c[a]=b?.data||b||{id:a}}catch(b){c[a]={id:a}}for(let b of(x(c),a)){let a=b.wo&&(b.wo.status||b.wo.raw&&b.wo.raw.status)||b.status||"",c=String(a||"").trim().toUpperCase();b.woStatus=c||"UNKNOWN",b.deployed="DEPLOYED"===c||"ASSIGNED"===c||c.includes("READY"),Array.isArray(b.assignedNames)||(b.assignedNames=[])}let d={};for(let b of a){let a=b.assigneeId||"unassigned";d[a]||(d[a]=[]),d[a].push(b)}v(d)}catch(a){console.error("load monitor",a)}finally{t(!1)}}return(0,c.useEffect)(()=>{y()},[q]),(0,b.jsxs)(d.default,{sx:{p:2},children:[(0,b.jsxs)(d.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,b.jsx)(g.default,{variant:"h5",children:"Monitoring Teknisi"}),(0,b.jsxs)(d.default,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,b.jsx)(m.default,{size:"small",label:"Tanggal",type:"date",value:q,onChange:a=>r(a.target.value),InputLabelProps:{shrink:!0}}),(0,b.jsx)(l.default,{variant:"contained",size:"small",onClick:y,children:"Refresh"})]})]}),(0,b.jsxs)(f.default,{container:!0,spacing:2,children:[0===Object.keys(u).length&&(0,b.jsx)(f.default,{item:!0,xs:12,children:(0,b.jsx)(e.default,{sx:{p:2},children:"No assignments for selected date."})}),Object.entries(u).map(([a,c])=>{let l=w[a]||{id:a,name:a};return c.sort((a,b)=>new Date(a.scheduledAt||a.wo?.start_date||a.createdAt).getTime()-new Date(b.scheduledAt||b.wo?.start_date||b.createdAt).getTime()),(0,b.jsx)(f.default,{item:!0,xs:12,md:6,lg:4,children:(0,b.jsxs)(e.default,{sx:{p:2},children:[(0,b.jsxs)(d.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)(d.default,{children:[(0,b.jsx)(g.default,{variant:"subtitle1",children:l.name||l.displayName||l.email||a}),Array.isArray(c[0]?.assignedNames)&&c[0].assignedNames.length>0&&(0,b.jsx)(g.default,{variant:"caption",sx:{color:"#666"},children:c[0].assignedNames.join(", ")})]}),(0,b.jsxs)(d.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,b.jsx)(n.default,{label:c[0]?.woStatus||(c[0]?.deployed?"DEPLOYED":"NOT DEPLOYED"),size:"small",color:c[0]?.woStatus==="DEPLOYED"?"success":c[0]?.woStatus==="ASSIGNED"?"info":(c[0]?.woStatus||"").includes("READY")?"warning":"default"}),(0,b.jsxs)(g.default,{variant:"caption",children:[c.length," tugas"]})]})]}),(0,b.jsx)(k.default,{sx:{my:1}}),(0,b.jsx)(h.default,{dense:!0,children:c.map(a=>{let c=a.scheduledAt||a.wo&&a.wo.start_date||a.createdAt,d=c?new Date(c).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-",e=a.wo?.doc_no||a.wo&&a.wo.id||"",f=a.wo?.asset_name||"";return(0,b.jsx)(i.default,{divider:!0,children:(0,b.jsx)(j.default,{primary:`${d} • ${e}`,secondary:`${f} ${a.task_name?"— "+a.task_name:""}`})},a.id)})})]})},a)})]})]})}a.s(["default",()=>q])}];

//# sourceMappingURL=web_7a699759._.js.map