module.exports=[35559,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(32315),e=a.i(62205),f=a.i(25344),g=a.i(9098),h=a.i(61981),i=a.i(89280),j=a.i(90712),k=a.i(45389),l=a.i(36539),m=a.i(41414),n=a.i(19916),o=a.i(70219),p=a.i(49945),q=a.i(75395),r=a.i(30092),s=a.i(45481),t=a.i(52283),u=a.i(13116),v=a.i(78846),w=a.i(99978),x=a.i(58988),y=a.i(52003),z=a.i(55980),A=a.i(14220);function B(a){return(0,A.default)("MuiListItem",a)}let C=(0,z.unstable_generateUtilityClasses)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),D=(0,z.unstable_generateUtilityClasses)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function E(a){return(0,A.default)("MuiListItemSecondaryAction",a)}(0,z.unstable_generateUtilityClasses)("MuiListItemSecondaryAction",["root","disableGutters"]);let F=["className"],G=(0,s.default)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a;return[b.root,c.disableGutters&&b.disableGutters]}})(({ownerState:a})=>(0,n.default)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},a.disableGutters&&{right:0})),H=c.forwardRef(function(a,d){let e=(0,t.default)({props:a,name:"MuiListItemSecondaryAction"}),{className:f}=e,g=(0,m.default)(e,F),h=c.useContext(y.default),i=(0,n.default)({},e,{disableGutters:h.disableGutters}),j=(a=>{let{disableGutters:b,classes:c}=a;return(0,p.unstable_composeClasses)({root:["root",b&&"disableGutters"]},E,c)})(i);return(0,b.jsx)(G,(0,n.default)({className:(0,o.default)(j.root,f),ownerState:i,ref:d},g))});H.muiName="ListItemSecondaryAction";let I=["className"],J=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],K=(0,s.default)("div",{name:"MuiListItem",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a;return[b.root,c.dense&&b.dense,"flex-start"===c.alignItems&&b.alignItemsFlexStart,c.divider&&b.divider,!c.disableGutters&&b.gutters,!c.disablePadding&&b.padding,c.button&&b.button,c.hasSecondaryAction&&b.secondaryAction]}})(({theme:a,ownerState:b})=>(0,n.default)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!b.disablePadding&&(0,n.default)({paddingTop:8,paddingBottom:8},b.dense&&{paddingTop:4,paddingBottom:4},!b.disableGutters&&{paddingLeft:16,paddingRight:16},!!b.secondaryAction&&{paddingRight:48}),!!b.secondaryAction&&{[`& > .${D.root}`]:{paddingRight:48}},{[`&.${C.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${C.selected}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:(0,r.alpha)(a.palette.primary.main,a.palette.action.selectedOpacity),[`&.${C.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:(0,r.alpha)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},[`&.${C.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},"flex-start"===b.alignItems&&{alignItems:"flex-start"},b.divider&&{borderBottom:`1px solid ${(a.vars||a).palette.divider}`,backgroundClip:"padding-box"},b.button&&{transition:a.transitions.create("background-color",{duration:a.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${C.selected}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:(0,r.alpha)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?`rgba(${a.vars.palette.primary.mainChannel} / ${a.vars.palette.action.selectedOpacity})`:(0,r.alpha)(a.palette.primary.main,a.palette.action.selectedOpacity)}}},b.hasSecondaryAction&&{paddingRight:48})),L=(0,s.default)("li",{name:"MuiListItem",slot:"Container",overridesResolver:(a,b)=>b.container})({position:"relative"}),M=c.forwardRef(function(a,d){let e=(0,t.default)({props:a,name:"MuiListItem"}),{alignItems:f="center",autoFocus:g=!1,button:h=!1,children:i,className:j,component:k,components:l={},componentsProps:r={},ContainerComponent:s="li",ContainerProps:{className:z}={},dense:A=!1,disabled:D=!1,disableGutters:E=!1,disablePadding:F=!1,divider:G=!1,focusVisibleClassName:M,secondaryAction:N,selected:O=!1,slotProps:P={},slots:Q={}}=e,R=(0,m.default)(e.ContainerProps,I),S=(0,m.default)(e,J),T=c.useContext(y.default),U=c.useMemo(()=>({dense:A||T.dense||!1,alignItems:f,disableGutters:E}),[f,T.dense,A,E]),V=c.useRef(null);(0,w.default)(()=>{g&&V.current&&V.current.focus()},[g]);let W=c.Children.toArray(i),X=W.length&&(0,v.default)(W[W.length-1],["ListItemSecondaryAction"]),Y=(0,n.default)({},e,{alignItems:f,autoFocus:g,button:h,dense:U.dense,disabled:D,disableGutters:E,disablePadding:F,divider:G,hasSecondaryAction:X,selected:O}),Z=(a=>{let{alignItems:b,button:c,classes:d,dense:e,disabled:f,disableGutters:g,disablePadding:h,divider:i,hasSecondaryAction:j,selected:k}=a;return(0,p.unstable_composeClasses)({root:["root",e&&"dense",!g&&"gutters",!h&&"padding",i&&"divider",f&&"disabled",c&&"button","flex-start"===b&&"alignItemsFlexStart",j&&"secondaryAction",k&&"selected"],container:["container"]},B,d)})(Y),$=(0,x.default)(V,d),_=Q.root||l.Root||K,aa=P.root||r.root||{},ab=(0,n.default)({className:(0,o.default)(Z.root,aa.className,j),disabled:D},S),ac=k||"li";return(h&&(ab.component=k||"div",ab.focusVisibleClassName=(0,o.default)(C.focusVisible,M),ac=u.default),X)?(ac=ab.component||k?ac:"div","li"===s&&("li"===ac?ac="div":"li"===ab.component&&(ab.component="div")),(0,b.jsx)(y.default.Provider,{value:U,children:(0,b.jsxs)(L,(0,n.default)({as:s,className:(0,o.default)(Z.container,z),ref:$,ownerState:Y},R,{children:[(0,b.jsx)(_,(0,n.default)({},aa,!(0,q.isHostComponent)(_)&&{as:ac,ownerState:(0,n.default)({},Y,aa.ownerState)},ab,{children:W})),W.pop()]}))})):(0,b.jsx)(y.default.Provider,{value:U,children:(0,b.jsxs)(_,(0,n.default)({},aa,{as:ac,ref:$},!(0,q.isHostComponent)(_)&&{ownerState:(0,n.default)({},Y,aa.ownerState)},ab,{children:[W,N&&(0,b.jsx)(H,{children:N})]}))})});var N=a.i(76208);let O=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],P=(0,s.default)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a;return[{[`& .${N.default.primary}`]:b.primary},{[`& .${N.default.secondary}`]:b.secondary},b.root,c.inset&&b.inset,c.primary&&c.secondary&&b.multiline,c.dense&&b.dense]}})(({ownerState:a})=>(0,n.default)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},a.primary&&a.secondary&&{marginTop:6,marginBottom:6},a.inset&&{paddingLeft:56})),Q=c.forwardRef(function(a,d){let e=(0,t.default)({props:a,name:"MuiListItemText"}),{children:f,className:g,disableTypography:h=!1,inset:i=!1,primary:j,primaryTypographyProps:l,secondary:q,secondaryTypographyProps:r}=e,s=(0,m.default)(e,O),{dense:u}=c.useContext(y.default),v=null!=j?j:f,w=q,x=(0,n.default)({},e,{disableTypography:h,inset:i,primary:!!v,secondary:!!w,dense:u}),z=(a=>{let{classes:b,inset:c,primary:d,secondary:e,dense:f}=a;return(0,p.unstable_composeClasses)({root:["root",c&&"inset",f&&"dense",d&&e&&"multiline"],primary:["primary"],secondary:["secondary"]},N.getListItemTextUtilityClass,b)})(x);return null==v||v.type===k.default||h||(v=(0,b.jsx)(k.default,(0,n.default)({variant:u?"body2":"body1",className:z.primary,component:null!=l&&l.variant?void 0:"span",display:"block"},l,{children:v}))),null==w||w.type===k.default||h||(w=(0,b.jsx)(k.default,(0,n.default)({variant:"body2",className:z.secondary,color:"text.secondary",display:"block"},r,{children:w}))),(0,b.jsxs)(P,(0,n.default)({className:(0,o.default)(z.root,g),ownerState:x,ref:d},s,{children:[v,w]}))});var R=a.i(13121),S=a.i(34491),T=a.i(59165);function U(){let a=(0,d.useRouter)(),[m,n]=(0,c.useState)("Pengguna"),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)({total:0,new:0,assigned:0,ready_to_deploy:0,deployed:0,in_progress:0,completed:0,overdue:0}),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(null);async function y(){p(!0);try{let b=await (0,T.default)("/work-orders?page=1&pageSize=2000"),c=b?.data??b??[],d=Date.now(),e={total:0,new:0,assigned:0,ready_to_deploy:0,deployed:0,in_progress:0,completed:0,overdue:0},f=[],g=[];for(let b of c||[]){var a;let c=(a=b.status||b.raw?.status||b.raw?.doc_status||"")?a.toString().toUpperCase().replace(/[-\s]/g,"_"):"";e.total++,("NEW"===c||"OPEN"===c)&&e.new++,"ASSIGNED"===c&&e.assigned++,"READY_TO_DEPLOY"===c&&e.ready_to_deploy++,"DEPLOYED"===c&&e.deployed++,("IN_PROGRESS"===c||"IN-PROGRESS"===c)&&e.in_progress++,"COMPLETED"===c&&e.completed++;let h=b.start_date?Date.parse(b.start_date):null,i=b.end_date?Date.parse(b.end_date):null;i&&i<d&&"COMPLETED"!==c&&(e.overdue++,g.push(b)),h&&h>=d&&h<=d+6048e5&&f.push(b)}f.sort((a,b)=>(Date.parse(a.start_date||"")||0)-(Date.parse(b.start_date||"")||0)),g.sort((a,b)=>(Date.parse(a.end_date||"")||0)-(Date.parse(b.end_date||"")||0)),r(e),t(f.slice(0,10)),v(g.slice(0,10)),x(new Date().toLocaleString())}catch(a){console.error("load dashboard",a)}finally{p(!1)}}return(0,c.useEffect)(()=>{},[a]),(0,b.jsxs)(e.default,{className:"dashboard",children:[(0,b.jsxs)(e.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,b.jsx)(k.default,{variant:"h5",children:"Planner Dashboard"}),(0,b.jsxs)(e.default,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,b.jsxs)(k.default,{children:["Halo, ",(0,b.jsx)("strong",{children:m})]}),(0,b.jsx)(i.default,{size:"small",onClick:function(){try{localStorage.removeItem("token")}catch(a){}try{localStorage.removeItem("sigap_user")}catch(a){}try{localStorage.removeItem("sigap_role")}catch(a){}try{document.cookie="token=; Path=/; Max-Age=0"}catch(a){}try{document.cookie="sigap_user=; Path=/; Max-Age=0"}catch(a){}try{document.cookie="sigap_role=; Path=/; Max-Age=0"}catch(a){}a.push("/login")},"aria-label":"Logout",children:(0,b.jsx)(j.default,{fontSize:"small"})})]})]}),(0,b.jsxs)(f.default,{container:!0,spacing:2,sx:{mb:2},children:[(0,b.jsx)(f.default,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsx)(k.default,{variant:"subtitle2",children:"Total Work Orders"}),(0,b.jsx)(k.default,{variant:"h5",children:q.total})]})}),(0,b.jsx)(f.default,{item:!0,xs:6,sm:3,md:2,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsx)(k.default,{variant:"subtitle2",children:"Assigned"}),(0,b.jsx)(k.default,{variant:"h6",children:q.assigned})]})}),(0,b.jsx)(f.default,{item:!0,xs:6,sm:3,md:2,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsx)(k.default,{variant:"subtitle2",children:"In Progress"}),(0,b.jsx)(k.default,{variant:"h6",children:q.in_progress})]})}),(0,b.jsx)(f.default,{item:!0,xs:6,sm:3,md:2,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsx)(k.default,{variant:"subtitle2",children:"Deployed"}),(0,b.jsx)(k.default,{variant:"h6",children:q.deployed})]})}),(0,b.jsx)(f.default,{item:!0,xs:6,sm:3,md:3,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsx)(k.default,{variant:"subtitle2",children:"Completed"}),(0,b.jsx)(k.default,{variant:"h6",children:q.completed})]})})]}),(0,b.jsxs)(f.default,{container:!0,spacing:2,children:[(0,b.jsx)(f.default,{item:!0,xs:12,md:6,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsxs)(e.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsx)(k.default,{variant:"h6",children:"Upcoming (7 days)"}),(0,b.jsx)(h.default,{size:"small",onClick:y,children:"Refresh"})]}),(0,b.jsx)(R.default,{sx:{my:1}}),o?(0,b.jsx)(S.default,{}):(0,b.jsxs)(l.default,{dense:!0,children:[0===s.length&&(0,b.jsx)(M,{children:(0,b.jsx)(Q,{primary:"No upcoming work orders"})}),s.map(c=>(0,b.jsx)(M,{button:!0,onClick:()=>a.push(`/work-orders/${c.id}`),children:(0,b.jsx)(Q,{primary:c.doc_no||c.id,secondary:`${c.asset_name||""} â€¢ ${c.start_date?new Date(c.start_date).toLocaleString():""}`})},c.id))]})]})}),(0,b.jsx)(f.default,{item:!0,xs:12,md:6,children:(0,b.jsxs)(g.default,{sx:{p:2},children:[(0,b.jsx)(k.default,{variant:"h6",children:"Overdue"}),(0,b.jsx)(R.default,{sx:{my:1}}),(0,b.jsxs)(l.default,{dense:!0,children:[0===u.length&&(0,b.jsx)(M,{children:(0,b.jsx)(Q,{primary:"No overdue work orders"})}),u.map(c=>(0,b.jsx)(M,{button:!0,onClick:()=>a.push(`/work-orders/${c.id}`),children:(0,b.jsx)(Q,{primary:c.doc_no||c.id,secondary:`Due: ${c.end_date?new Date(c.end_date).toLocaleString():""}`})},c.id))]})]})})]}),(0,b.jsxs)(e.default,{sx:{mt:2,fontSize:12,color:"#666"},children:["Last updated: ",w||"-"]})]})}a.s(["default",()=>U],35559)}];

//# sourceMappingURL=web_app_dashboard_page_jsx_315d9d5b._.js.map