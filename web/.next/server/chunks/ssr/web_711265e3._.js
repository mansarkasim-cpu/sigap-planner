module.exports=[74137,(a,b,c)=>{"use strict";var d=a.r(62817);Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=d(a.r(79626)),f=a.r(56856);c.default=(0,e.default)((0,f.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle")},98559,(a,b,c)=>{"use strict";var d=a.r(62817);Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=d(a.r(79626)),f=a.r(56856);c.default=(0,e.default)((0,f.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},2170,(a,b,c)=>{"use strict";var d=a.r(62817);Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=d(a.r(79626)),f=a.r(56856);c.default=(0,e.default)((0,f.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause")},32913,(a,b,c)=>{"use strict";var d=a.r(62817);Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=d(a.r(79626)),f=a.r(56856);c.default=(0,e.default)((0,f.jsx)("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"}),"Speed")},20142,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(62205),e=a.i(9098),f=a.i(45389),g=a.i(13874),h=a.i(61981),i=a.i(8607),j=a.i(6771),k=a.i(55806),l=a.i(34122),m=a.i(48154),n=a.i(81777),o=a.i(28683),p=a.i(21712),q=a.i(59165),r=a.i(89280),s=a.i(26281),t=a.i(62104),u=a.i(32775),v=a.i(45117),w=a.i(36539),x=a.i(40972),y=a.i(87449),z=a.i(13121),A=a.i(41414),B=a.i(19916),C=a.i(70219),D=a.i(49945),E=a.i(45481),F=a.i(52283);let G=(0,a.i(97371).default)((0,b.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var H=a.i(55980),I=a.i(14220);function J(a){return(0,I.default)("MuiAvatar",a)}(0,H.unstable_generateUtilityClasses)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);let K=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],L=(0,E.default)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a;return[b.root,b[c.variant],c.colorDefault&&b.colorDefault]}})(({theme:a,ownerState:b})=>(0,B.default)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===b.variant&&{borderRadius:(a.vars||a).shape.borderRadius},"square"===b.variant&&{borderRadius:0},b.colorDefault&&(0,B.default)({color:(a.vars||a).palette.background.default},a.vars?{backgroundColor:a.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===a.palette.mode?a.palette.grey[400]:a.palette.grey[600]}))),M=(0,E.default)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(a,b)=>b.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),N=(0,E.default)(G,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(a,b)=>b.fallback})({width:"75%",height:"75%"}),O=c.forwardRef(function(a,d){let e=(0,F.default)({props:a,name:"MuiAvatar"}),{alt:f,children:g,className:h,component:i="div",imgProps:j,sizes:k,src:l,srcSet:m,variant:n="circular"}=e,o=(0,A.default)(e,K),p=null,q=function({crossOrigin:a,referrerPolicy:b,src:d,srcSet:e}){let[f,g]=c.useState(!1);return c.useEffect(()=>{if(!d&&!e)return;g(!1);let c=!0,f=new Image;return f.onload=()=>{c&&g("loaded")},f.onerror=()=>{c&&g("error")},f.crossOrigin=a,f.referrerPolicy=b,f.src=d,e&&(f.srcset=e),()=>{c=!1}},[a,b,d,e]),f}((0,B.default)({},j,{src:l,srcSet:m})),r=l||m,s=r&&"error"!==q,t=(0,B.default)({},e,{colorDefault:!s,component:i,variant:n}),u=(a=>{let{classes:b,variant:c,colorDefault:d}=a;return(0,D.unstable_composeClasses)({root:["root",c,d&&"colorDefault"],img:["img"],fallback:["fallback"]},J,b)})(t);return p=s?(0,b.jsx)(M,(0,B.default)({alt:f,srcSet:m,src:l,sizes:k,ownerState:t,className:u.img},j)):null!=g?g:r&&f?f[0]:(0,b.jsx)(N,{ownerState:t,className:u.fallback}),(0,b.jsx)(L,(0,B.default)({as:i,ownerState:t,className:(0,C.default)(u.root,h),ref:d},o,{children:p}))});var P=a.i(74137),Q=a.i(18906),R=a.i(98559),S=a.i(2170),T=a.i(25028),U=a.i(58525),V=a.i(32913),W=a.i(6021),X=a.i(13541),Y=a.i(14019),Z=a.i(58461);function $(a){let b=new Date(a);return`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`}function _(){var a,A,B;let C,D,E,F=(0,c.useMemo)(()=>$(new Date),[]),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)($((E=(D=new Date(new Date)).getDay(),D.setDate(D.getDate()-(E+6)%7),D.setHours(0,0,0,0),D))),[K,L]=(0,c.useState)([]),[M,N]=(0,c.useState)(!1),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(null),ah=(0,c.useMemo)(()=>{let a=af?.items?[...af.items]:[],b=a=>{let b=a?.question||{};for(let c of[b.index,b.index_number,b.order,b.position,a.index,a.order,b.id,a.id]){if(null==c)continue;let a=Number(c);if(!isNaN(a))return a}return 9999};return a.sort((a,c)=>b(a)-b(c)),a},[af?.items]),ai=(0,c.useRef)(null),[aj,ak]=(0,c.useState)(!1);(0,c.useRef)({interval:null});let[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)("normal");async function ap(){try{let a=await (0,q.default)("/master/sites");L(a?.data||a||[])}catch(a){console.error("load sites",a)}}async function aq(){N(!0);try{let a=[];G&&a.push(`site_id=${encodeURIComponent(G)}`),I&&a.push(`week_start=${encodeURIComponent(I)}`);let b=`/monitoring/daily-weekly${a.length?"?"+a.join("&"):""}`,c=await (0,q.default)(b);aa(c?.data||c)}catch(a){console.error("load monitoring",a),aa(null)}finally{N(!1)}}return a=ai,A=aj,B=an,C=(0,c.useRef)(null),(0,c.useEffect)(()=>{if(!A){C.current&&(clearInterval(C.current),C.current=null);return}let b=a.current;if(!b)return;let c=.1*("slow"===B?10:"fast"===B?60:30);return C.current=setInterval(()=>{if(!b)return;let a=b.scrollHeight-b.clientHeight;if(!(a<=0)){if(b.scrollTop+c>=a){b.scrollTop=0;return}b.scrollTo({top:Math.min(b.scrollTop+c,a),behavior:"smooth"})}},100),()=>{C.current&&(clearInterval(C.current),C.current=null)}},[a,A,B]),(0,c.useEffect)(()=>{function a(){try{let a=ai.current,b=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;am(!!(b&&a&&b===a))}catch(a){}}return document.addEventListener("fullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("MSFullscreenChange",a),()=>{document.removeEventListener("fullscreenchange",a),document.removeEventListener("webkitfullscreenchange",a),document.removeEventListener("mozfullscreenchange",a),document.removeEventListener("MSFullscreenChange",a)}},[ai]),(0,c.useEffect)(()=>{ap(),aq()},[]),(0,b.jsxs)(d.default,{sx:{p:2},children:[(0,b.jsxs)(d.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,position:"sticky",top:0,backgroundColor:"background.paper",zIndex:9,py:1},children:[(0,b.jsxs)(d.default,{sx:{display:"flex",flexDirection:"column"},children:[(0,b.jsx)(f.default,{variant:"h5",children:"Daily Checklist > Weekly Monitoring"}),(0,b.jsxs)(f.default,{variant:"caption",sx:{color:"text.secondary"},children:["Week: ",_?.week_start||I]})]}),(0,b.jsxs)(d.default,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,b.jsxs)(g.default,{select:!0,size:"small",label:"Site",value:G,onChange:a=>H(a.target.value),sx:{minWidth:220},children:[(0,b.jsx)(i.default,{value:"",children:"All Sites"}),K.map(a=>(0,b.jsx)(i.default,{value:a.id,children:a.name||a.nama||a.id},a.id))]}),(0,b.jsx)(g.default,{size:"small",label:"Week Start",type:"date",value:I,onChange:a=>J(a.target.value),InputLabelProps:{shrink:!0}}),(0,b.jsx)(h.default,{variant:"contained",onClick:aq,children:"Refresh"}),(0,b.jsxs)(W.default,{direction:"row",spacing:.5,alignItems:"center",sx:{ml:1},children:[(0,b.jsx)(s.default,{title:aj?"Pause auto-scroll":"Start auto-scroll",children:(0,b.jsx)(r.default,{size:"small",onClick:()=>ak(a=>!a),children:aj?(0,b.jsx)(S.default,{}):(0,b.jsx)(R.default,{})})}),(0,b.jsxs)(Y.default,{size:"small",sx:{minWidth:110},children:[(0,b.jsxs)(Z.default,{id:"speed-label",children:[(0,b.jsx)(V.default,{fontSize:"small",sx:{mr:.5}}),"Speed"]}),(0,b.jsxs)(X.default,{labelId:"speed-label",value:an,label:"Speed",onChange:a=>ao(a.target.value),children:[(0,b.jsx)(i.default,{value:"slow",children:"Slow"}),(0,b.jsx)(i.default,{value:"normal",children:"Normal"}),(0,b.jsx)(i.default,{value:"fast",children:"Fast"})]})]}),(0,b.jsx)(s.default,{title:al?"Exit fullscreen":"Enter fullscreen",children:(0,b.jsx)(r.default,{size:"small",onClick:async()=>{try{let a=ai.current||document.documentElement;al?(document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),am(!1)):(a.requestFullscreen?await a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(),am(!0))}catch(a){console.error("fullscreen",a)}},children:al?(0,b.jsx)(U.default,{}):(0,b.jsx)(T.default,{})})})]})]})]}),(0,b.jsxs)(e.default,{ref:ai,sx:{p:2,height:"70vh",overflow:"auto"},children:[M&&(0,b.jsx)(d.default,{sx:{display:"flex",justifyContent:"center",p:4},children:(0,b.jsx)(p.default,{})}),!M&&!_&&(0,b.jsx)(f.default,{children:"No data"}),!M&&_&&(0,b.jsx)(d.default,{children:(0,b.jsxs)(j.default,{size:"small",children:[(0,b.jsx)(m.default,{children:(0,b.jsxs)(n.default,{sx:{"& th":{borderBottom:"2px solid",borderColor:a=>a.palette.divider}},children:[(0,b.jsx)(l.default,{sx:{position:"sticky",top:0,backgroundColor:a=>a.palette.primary.main,color:a=>a.palette.primary.contrastText,zIndex:3,fontWeight:700,fontSize:"0.95rem",py:1.2,boxShadow:a=>`0 1px 0 ${a.palette.divider} inset`},children:"Alat"}),_.days.map(a=>(0,b.jsx)(l.default,{align:"center",sx:{position:"sticky",top:0,backgroundColor:a=>a.palette.primary.main,color:a=>a.palette.primary.contrastText,zIndex:2,fontWeight:700,fontSize:"0.9rem",py:1.2,borderLeft:a=>`1px solid ${a.palette.divider}`},children:(0,b.jsxs)(d.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.25},children:[(0,b.jsx)(f.default,{variant:"caption",sx:{opacity:.95,fontWeight:700},children:function(a){try{return new Date(a+"T00:00:00").toLocaleDateString(void 0,{weekday:"short"})}catch(a){return""}}(a)}),(0,b.jsx)(f.default,{variant:"body2",children:a})]})},a))]})}),(0,b.jsx)(k.default,{children:_.alats.map((a,c)=>(0,b.jsxs)(n.default,{sx:{backgroundColor:a=>c%2?a.palette.action.hover:"inherit"},children:[(0,b.jsxs)(l.default,{sx:{fontWeight:600,minWidth:220},children:[a.nama," ",a.kode?`(${a.kode})`:""]}),_.days.map(c=>{let d=a.statuses[c],e="OPEN",f="default";d&&d.done?(e="DONE",f="success"):c<F?(e="MISS",f="error"):(e="OPEN",f="default");let g=d&&d.checklist_id?`ID: ${d.checklist_id} • ${d.performed_at||""}`:"MISS"===e?"Missed (no checklist)":"OPEN"===e?"Not yet due":"",h="OPEN"===e?{backgroundColor:a=>a.palette.grey[300],color:a=>a.palette.text.primary,fontWeight:600}:{};return(0,b.jsx)(l.default,{align:"center",sx:{py:1},children:(0,b.jsx)(s.default,{title:g,arrow:!0,children:(0,b.jsx)("span",{children:(0,b.jsx)(o.default,{label:e,color:"default"===f?void 0:f,size:"medium",sx:h,onClick:async()=>{if("DONE"!==e||!d||!d.checklist_id)return;let a=d.checklist_id;try{ae(!0),ac(!0);let b=await (0,q.default)(`/checklists/${a}`),c=b?.data||b;ag(c)}catch(a){console.error("load detail",a),ag({error:a?.message||String(a)})}finally{ae(!1)}}})})})},c)})]},a.id))})]})})]}),(0,b.jsxs)(t.default,{open:ab,onClose:()=>{ac(!1),ag(null)},fullWidth:!0,maxWidth:"md",children:[(0,b.jsxs)(u.default,{sx:{m:0,p:2},children:["Checklist Detail",(0,b.jsx)(r.default,{"aria-label":"close",onClick:()=>{ac(!1),ag(null)},sx:{position:"absolute",right:8,top:8},size:"small",children:(0,b.jsx)(Q.default,{})})]}),(0,b.jsxs)(v.default,{children:[ad&&(0,b.jsx)(f.default,{children:"Loading..."}),!ad&&af&&af.error&&(0,b.jsx)(f.default,{color:"error",children:af.error}),!ad&&af&&!af.error&&(0,b.jsxs)(d.default,{children:[(0,b.jsxs)(W.default,{direction:"row",spacing:2,alignItems:"center",sx:{mb:1},children:[(0,b.jsx)(O,{children:(af.checklist?.teknisi_name||"?").slice(0,1)}),(0,b.jsxs)(d.default,{children:[(0,b.jsx)(f.default,{variant:"subtitle1",children:af.checklist?.teknisi_name||"—"}),(0,b.jsxs)(f.default,{variant:"caption",children:["Performed at: ",function(a){if(!a)return"-";let b=new Date(a);if(isNaN(b.getTime()))return String(a);let c=String(b.getMonth()+1).padStart(2,"0"),d=String(b.getDate()).padStart(2,"0"),e=b.getFullYear(),f=String(b.getHours()).padStart(2,"0"),g=String(b.getMinutes()).padStart(2,"0");return`${d}-${c}-${e} ${f}:${g}`}(af.checklist?.performed_at)]})]}),(0,b.jsxs)(d.default,{sx:{ml:3},children:[(0,b.jsxs)(f.default,{variant:"subtitle2",children:["Alat: ",af.checklist?.alat?.nama||af.checklist?.alat?.name||"—"]}),af.checklist?.alat?.kode&&(0,b.jsxs)(f.default,{variant:"caption",children:["Code: ",af.checklist.alat.kode]})]})]}),(0,b.jsx)(f.default,{variant:"body2",sx:{mb:1},children:af.checklist?.notes}),(0,b.jsx)(z.default,{sx:{mb:1}}),(0,b.jsx)(w.default,{children:ah.map((a,c)=>(0,b.jsxs)(x.default,{alignItems:"flex-start",sx:{gap:1},children:[(0,b.jsx)(y.default,{primary:`${c+1}. ${a.question?.question_text||a.question?.text||`Q${a.question?.id||""}`}`}),(()=>{let c=a.option?.option_text??a.option?.name??a.answer_text??(void 0!==a.answer_number?String(a.answer_number):null),e=null==c?null:String(c).trim(),g=null===e||""===e||["null","undefined"].includes(e.toLowerCase())?null:e,h=null;if(null===g)h=(0,b.jsx)(f.default,{component:"span",variant:"body2",color:"text.secondary",children:"N/A"});else{let a=g.toLowerCase();h=["true","1","yes","y"].includes(a)?(0,b.jsx)(P.default,{sx:{color:"success.main"}}):["false","0","no","n"].includes(a)?(0,b.jsx)(Q.default,{sx:{color:"error.main"}}):(0,b.jsx)(f.default,{component:"span",variant:"body2",color:"text.primary",children:g})}return(0,b.jsx)(d.default,{sx:{minWidth:120,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},children:h})})(),a.evidence_photo_url||a.evidence_photo_path?(0,b.jsxs)(d.default,{component:"span",sx:{ml:1,textAlign:"center"},children:[(0,b.jsx)("a",{href:a.evidence_photo_url||a.evidence_photo_path,target:"_blank",rel:"noreferrer",children:(0,b.jsx)(d.default,{component:"img",src:a.evidence_photo_url||a.evidence_photo_path,sx:{width:80,height:80,objectFit:"cover",borderRadius:1,border:"1px solid",borderColor:"divider"}})}),a.evidence_note||a.evidence_description?(0,b.jsx)(f.default,{variant:"caption",sx:{display:"block",mt:.5,maxWidth:120,overflow:"hidden",textOverflow:"ellipsis"},children:a.evidence_note||a.evidence_description}):null]}):null]},c))})]})]})]})]})}a.s(["default",()=>_],20142)}];

//# sourceMappingURL=web_711265e3._.js.map