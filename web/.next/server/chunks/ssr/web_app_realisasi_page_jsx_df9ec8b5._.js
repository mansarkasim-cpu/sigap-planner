module.exports=[99612,a=>{"use strict";var b=a.i(56856),c=a.i(55132),d=a.i(59165),e=a.i(62205),f=a.i(61981),g=a.i(45389),h=a.i(26178),i=a.i(42802),j=a.i(13874),k=a.i(6021),l=a.i(19916),m=a.i(41414),n=a.i(70219),o=a.i(49945),p=a.i(52283),q=a.i(55980),r=a.i(14220);function s(a){return(0,r.default)("MuiPagination",a)}(0,q.unstable_generateUtilityClasses)("MuiPagination",["root","ul","outlined","text"]);var t=a.i(17449);let u=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];var v=a.i(30092);function w(a){return(0,r.default)("MuiPaginationItem",a)}let x=(0,q.unstable_generateUtilityClasses)("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]);var y=a.i(1579),z=a.i(13116),A=a.i(50997),B=a.i(97371);let C=(0,B.default)((0,b.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),D=(0,B.default)((0,b.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),E=(0,B.default)((0,b.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),F=(0,B.default)((0,b.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext");var G=a.i(45481);let H=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],I=(a,b)=>{let{ownerState:c}=a;return[b.root,b[c.variant],b[`size${(0,A.default)(c.size)}`],"text"===c.variant&&b[`text${(0,A.default)(c.color)}`],"outlined"===c.variant&&b[`outlined${(0,A.default)(c.color)}`],"rounded"===c.shape&&b.rounded,"page"===c.type&&b.page,("start-ellipsis"===c.type||"end-ellipsis"===c.type)&&b.ellipsis,("previous"===c.type||"next"===c.type)&&b.previousNext,("first"===c.type||"last"===c.type)&&b.firstLast]},J=(0,G.default)("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:I})(({theme:a,ownerState:b})=>(0,l.default)({},a.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",[`&.${x.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},"small"===b.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===b.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:a.typography.pxToRem(15)})),K=(0,G.default)(z.default,{name:"MuiPaginationItem",slot:"Root",overridesResolver:I})(({theme:a,ownerState:b})=>(0,l.default)({},a.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,[`&.${x.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${x.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.selected}`]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selected} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:(0,v.alpha)(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},[`&.${x.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selected} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:(0,v.alpha)(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},[`&.${x.disabled}`]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},"small"===b.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===b.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:a.typography.pxToRem(15)},"rounded"===b.shape&&{borderRadius:(a.vars||a).shape.borderRadius}),({theme:a,ownerState:b})=>(0,l.default)({},"text"===b.variant&&{[`&.${x.selected}`]:(0,l.default)({},"standard"!==b.color&&{color:(a.vars||a).palette[b.color].contrastText,backgroundColor:(a.vars||a).palette[b.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[b.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[b.color].main}},[`&.${x.focusVisible}`]:{backgroundColor:(a.vars||a).palette[b.color].dark}},{[`&.${x.disabled}`]:{color:(a.vars||a).palette.action.disabled}})},"outlined"===b.variant&&{border:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${"light"===a.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${x.selected}`]:(0,l.default)({},"standard"!==b.color&&{color:(a.vars||a).palette[b.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[b.color].mainChannel} / 0.5)`:(0,v.alpha)(a.palette[b.color].main,.5)}`,backgroundColor:a.vars?`rgba(${a.vars.palette[b.color].mainChannel} / ${a.vars.palette.action.activatedOpacity})`:(0,v.alpha)(a.palette[b.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[b.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:(0,v.alpha)(a.palette[b.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[b.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:(0,v.alpha)(a.palette[b.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{[`&.${x.disabled}`]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})),L=(0,G.default)("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(a,b)=>b.icon})(({theme:a,ownerState:b})=>(0,l.default)({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},"small"===b.size&&{fontSize:a.typography.pxToRem(18)},"large"===b.size&&{fontSize:a.typography.pxToRem(22)})),M=c.forwardRef(function(a,c){let d=(0,p.default)({props:a,name:"MuiPaginationItem"}),{className:e,color:f="standard",component:g,components:h={},disabled:i=!1,page:j,selected:k=!1,shape:q="circular",size:r="medium",slots:s={},type:t="page",variant:u="text"}=d,v=(0,m.default)(d,H),x=(0,l.default)({},d,{color:f,disabled:i,selected:k,shape:q,size:r,type:t,variant:u}),z=(0,y.default)(),B=(a=>{let{classes:b,color:c,disabled:d,selected:e,size:f,shape:g,type:h,variant:i}=a,j={root:["root",`size${(0,A.default)(f)}`,i,g,"standard"!==c&&`${i}${(0,A.default)(c)}`,d&&"disabled",e&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[h]],icon:["icon"]};return(0,o.unstable_composeClasses)(j,w,b)})(x),G=("rtl"===z.direction?{previous:s.next||h.next||F,next:s.previous||h.previous||E,last:s.first||h.first||C,first:s.last||h.last||D}:{previous:s.previous||h.previous||E,next:s.next||h.next||F,first:s.first||h.first||C,last:s.last||h.last||D})[t];return"start-ellipsis"===t||"end-ellipsis"===t?(0,b.jsx)(J,{ref:c,ownerState:x,className:(0,n.default)(B.root,e),children:"…"}):(0,b.jsxs)(K,(0,l.default)({ref:c,ownerState:x,component:g,disabled:i,className:(0,n.default)(B.root,e)},v,{children:["page"===t&&j,G?(0,b.jsx)(L,{as:G,ownerState:x,className:B.icon}):null]}))}),N=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],O=(0,G.default)("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(a,b)=>{let{ownerState:c}=a;return[b.root,b[c.variant]]}})({}),P=(0,G.default)("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(a,b)=>b.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Q(a,b,c){return"page"===a?`${c?"":"Go to "}page ${b}`:`Go to ${a} page`}let R=c.forwardRef(function(a,c){let d=(0,p.default)({props:a,name:"MuiPagination"}),{boundaryCount:e=1,className:f,color:g="standard",count:h=1,defaultPage:i=1,disabled:j=!1,getItemAriaLabel:k=Q,hideNextButton:q=!1,hidePrevButton:r=!1,renderItem:v=a=>(0,b.jsx)(M,(0,l.default)({},a)),shape:w="circular",showFirstButton:x=!1,showLastButton:y=!1,siblingCount:z=1,size:A="medium",variant:B="text"}=d,C=(0,m.default)(d,N),{items:D}=function(a={}){let{boundaryCount:b=1,componentName:c="usePagination",count:d=1,defaultPage:e=1,disabled:f=!1,hideNextButton:g=!1,hidePrevButton:h=!1,onChange:i,page:j,showFirstButton:k=!1,showLastButton:n=!1,siblingCount:o=1}=a,p=(0,m.default)(a,u),[q,r]=(0,t.unstable_useControlled)({controlled:j,default:e,name:c,state:"page"}),s=(a,b)=>{j||r(b),i&&i(a,b)},v=(a,b)=>Array.from({length:b-a+1},(b,c)=>a+c),w=v(1,Math.min(b,d)),x=v(Math.max(d-b+1,b+1),d),y=Math.max(Math.min(q-o,d-b-2*o-1),b+2),z=Math.min(Math.max(q+o,b+2*o+2),x.length>0?x[0]-2:d-1),A=[...k?["first"]:[],...h?[]:["previous"],...w,...y>b+2?["start-ellipsis"]:b+1<d-b?[b+1]:[],...v(y,z),...z<d-b-1?["end-ellipsis"]:d-b>b?[d-b]:[],...x,...g?[]:["next"],...n?["last"]:[]],B=a=>{switch(a){case"first":return 1;case"previous":return q-1;case"next":return q+1;case"last":return d;default:return null}},C=A.map(a=>"number"==typeof a?{onClick:b=>{s(b,a)},type:"page",page:a,selected:a===q,disabled:f,"aria-current":a===q?"true":void 0}:{onClick:b=>{s(b,B(a))},type:a,page:B(a),selected:!1,disabled:f||-1===a.indexOf("ellipsis")&&("next"===a||"last"===a?q>=d:q<=1)});return(0,l.default)({items:C},p)}((0,l.default)({},d,{componentName:"Pagination"})),E=(0,l.default)({},d,{boundaryCount:e,color:g,count:h,defaultPage:i,disabled:j,getItemAriaLabel:k,hideNextButton:q,hidePrevButton:r,renderItem:v,shape:w,showFirstButton:x,showLastButton:y,siblingCount:z,size:A,variant:B}),F=(a=>{let{classes:b,variant:c}=a;return(0,o.unstable_composeClasses)({root:["root",c],ul:["ul"]},s,b)})(E);return(0,b.jsx)(O,(0,l.default)({"aria-label":"pagination navigation",className:(0,n.default)(F.root,f),ownerState:E,ref:c},C,{children:(0,b.jsx)(P,{className:F.ul,ownerState:E,children:D.map((a,c)=>(0,b.jsx)("li",{children:v((0,l.default)({},a,{color:g,"aria-label":k(a.type,a.page,a.selected),shape:w,size:A,variant:B}))},c))})}))});var S=a.i(14019),T=a.i(58461),U=a.i(13541),V=a.i(8607);function W(a){if(!a)return"-";let b=String(a).match(/(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})/);if(b)return`${b[3]}/${b[2]}/${b[1]} ${b[4]}:${b[5]}`;try{let b=new Date(a),c=a=>a<10?"0"+a:a;return`${c(b.getDate())}/${c(b.getMonth()+1)}/${b.getFullYear()} ${c(b.getHours())}:${c(b.getMinutes())}`}catch(b){return String(a)}}function X(a){if(!a||a.startsWith("http://")||a.startsWith("https://"))return a;let b="undefined"!=typeof process&&process.env&&1?"http://localhost:4000/api":"",c=b||"";return c?(c.endsWith("/api")&&(c=c.slice(0,-4)),a.startsWith("/")||(a="/"+a),c+a):a}function Y(){let[a,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(1),[q,r]=(0,c.useState)(10),[s,t]=(0,c.useState)(1),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)({});async function C(){l(!0);try{let a=[];a.push(`page=${encodeURIComponent(o)}`),a.push(`pageSize=${encodeURIComponent(q)}`),u&&u.trim()&&a.push(`q=${encodeURIComponent(u.trim())}`),w&&a.push(`start=${encodeURIComponent(w)}`),y&&a.push(`end=${encodeURIComponent(y)}`);let b=`/work-orders?${a.join("&")}`,c=await (0,d.default)(b),e=[],f=0;Array.isArray(c)?(e=c,f=c.length):c&&Array.isArray(c.items)?(e=c.items,f=Number(c.total||e.length)):c&&Array.isArray(c.data)?(e=c.data,f=Number(c.total||e.length)):c&&Array.isArray(c)&&(e=c,f=c.length);let g=(e||[]).filter(a=>"COMPLETED"===(a.status||a.raw?.status||"PREPARATION").toString().toUpperCase());n(g);let h=Math.max(1,Math.ceil((f||g.length)/q));t(h)}catch(a){console.error("load realisasi list",a),n([]),t(1)}finally{l(!1)}}async function D(a){try{let b=await (0,d.default)(`/work-orders/${encodeURIComponent(a)}/tasks`),c=Array.isArray(b)?b:b?.data??[],e=await (0,d.default)(`/work-orders/${encodeURIComponent(a)}/realisasi/full`),f=e?.items??e?.data??e??[],g={};for(let a of f){let b=a.taskId||a.task_id||(a.assignmentId?String(a.assignmentId):"unknown");g[b]=g[b]||[],g[b].push(a)}B(b=>({...b,[a]:{tasks:c,relByTask:g}}))}catch(b){console.error("load details",b),B(b=>({...b,[a]:{tasks:[],relByTask:{}}}))}}return(0,c.useEffect)(()=>{C()},[o,q]),(0,b.jsxs)("main",{style:{padding:24},children:[(0,b.jsx)("h1",{children:"Realisasi — Completed Work Orders"}),a?(0,b.jsx)("div",{children:"Loading..."}):null,(0,b.jsx)(e.default,{sx:{mb:2},children:(0,b.jsxs)(k.default,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",children:[(0,b.jsx)(j.default,{size:"small",label:"Search (doc no / id)",value:u,onChange:a=>v(a.target.value)}),(0,b.jsx)(j.default,{size:"small",label:"Start date",type:"date",InputLabelProps:{shrink:!0},value:w,onChange:a=>x(a.target.value)}),(0,b.jsx)(j.default,{size:"small",label:"End date",type:"date",InputLabelProps:{shrink:!0},value:y,onChange:a=>z(a.target.value)}),(0,b.jsx)(f.default,{variant:"outlined",onClick:()=>{p(1),C()},children:"Apply"}),(0,b.jsx)(f.default,{variant:"text",onClick:()=>{v(""),x(""),z(""),p(1),C()},children:"Clear"}),(0,b.jsxs)(S.default,{size:"small",sx:{minWidth:120},children:[(0,b.jsx)(T.default,{id:"ps-label",children:"Page Size"}),(0,b.jsxs)(U.default,{labelId:"ps-label",value:q,label:"Page Size",onChange:a=>{r(Number(a.target.value)),p(1)},children:[(0,b.jsx)(V.default,{value:5,children:"5"}),(0,b.jsx)(V.default,{value:10,children:"10"}),(0,b.jsx)(V.default,{value:20,children:"20"}),(0,b.jsx)(V.default,{value:50,children:"50"})]})]})]})}),(0,b.jsxs)(e.default,{sx:{display:"flex",flexDirection:"column",gap:2},children:[m.map(a=>(0,b.jsx)(h.default,{variant:"outlined",children:(0,b.jsxs)(i.default,{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.default,{variant:"h6",children:a.doc_no||a.id}),(0,b.jsxs)(g.default,{variant:"body2",color:"textSecondary",children:["Start: ",W(a.start_date||a.raw?.start_date)]}),(0,b.jsxs)(g.default,{variant:"body2",color:"textSecondary",children:["End: ",W(a.end_date||a.raw?.end_date)]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(f.default,{size:"small",onClick:async()=>{A[a.id]?B(b=>({...b,[a.id]:null})):await D(a.id)},children:A[a.id]?"Hide":"View Realisasi"})})]}),A[a.id]&&(0,b.jsxs)("div",{style:{marginTop:12},children:[(0,b.jsx)(g.default,{variant:"subtitle1",children:"Tasks & Realisasi"}),A[a.id].tasks&&A[a.id].tasks.length>0?A[a.id].tasks.map(c=>(0,b.jsxs)(e.default,{sx:{borderTop:"1px solid #eee",pt:1,mt:1},children:[(0,b.jsx)(g.default,{variant:"subtitle2",children:c.name||c.task_name||"Task"}),(0,b.jsxs)("div",{style:{fontSize:13,color:"#666"},children:["Task ID: ",c.id||c.external_id||""]}),(0,b.jsx)("div",{style:{marginTop:8},children:A[a.id].relByTask&&A[a.id].relByTask[c.id]?A[a.id].relByTask[c.id].map(a=>(0,b.jsxs)(e.default,{sx:{mb:1,p:1,border:"1px dashed #ddd",borderRadius:1},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Start:"})," ",W(a.start),"   ",(0,b.jsx)("strong",{children:"End:"})," ",W(a.end)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Teknisi:"})," ",a.user?(a.user.nipp?a.user.nipp+" • ":"")+(a.user.name||a.user.email||a.user.id):"-"]}),a.notes?(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{children:"Keterangan:"})," ",a.notes]}):null,a.photoUrl?(0,b.jsx)("div",{style:{marginTop:6},children:(0,b.jsx)("a",{href:X(a.photoUrl),target:"_blank",rel:"noreferrer",children:(0,b.jsx)("img",{src:X(a.photoUrl),alt:"photo",style:{width:120,height:"auto",borderRadius:6,border:"1px solid #ddd"},loading:"lazy"})})}):null]},a.id)):(0,b.jsx)("div",{style:{color:"#666"},children:"No realisasi entries for this task."})})]},c.id||c.external_id)):(0,b.jsx)("div",{style:{color:"#666"},children:"No tasks found for this work order."})]})]})},a.id)),0!==m.length||a?null:(0,b.jsx)("div",{children:"No completed work orders found."})]}),(0,b.jsx)(e.default,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,b.jsxs)(k.default,{spacing:2,alignItems:"center",children:[(0,b.jsx)(R,{page:o,count:s,onChange:(a,b)=>{p(b)},color:"primary"}),(0,b.jsxs)("div",{style:{color:"#666"},children:["Page ",o," of ",s]})]})})]})}a.s(["default",()=>Y],99612)}];

//# sourceMappingURL=web_app_realisasi_page_jsx_df9ec8b5._.js.map