{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/SigapPlanner/web/app/master/hubs/page.jsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport apiClient from '../../../lib/api-client';\r\nimport Box from '@mui/material/Box';\r\nimport Paper from '@mui/material/Paper';\r\nimport Button from '@mui/material/Button';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport TextField from '@mui/material/TextField';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\nexport default function HubsPage(){\r\n  const [rows,setRows] = useState([]);\r\n  const [loading,setLoading] = useState(false);\r\n  const [modalOpen,setModalOpen] = useState(false);\r\n  const [editing,setEditing] = useState(null);\r\n\r\n  async function load(){\r\n    setLoading(true);\r\n    try{\r\n      const data = await apiClient('/master/hubs');\r\n      setRows(Array.isArray(data)?data:[]);\r\n    }catch(err){ console.error(err); alert(err?.body?.message||err?.message||'Load failed'); }\r\n    finally{ setLoading(false); }\r\n  }\r\n\r\n  useEffect(()=>{ load(); },[]);\r\n\r\n  function openCreate(){ setEditing({ name:'', code:'', description:'' }); setModalOpen(true); }\r\n  function openEdit(r){ setEditing({...r}); setModalOpen(true); }\r\n\r\n  async function save(){\r\n    if(!editing || !editing.name) return alert('Name required');\r\n    try{\r\n      if(editing.id){ await apiClient(`/master/hubs/${editing.id}`, { method: 'PATCH', body: editing }); }\r\n      else { await apiClient('/master/hubs', { method: 'POST', body: editing }); }\r\n      setModalOpen(false); setEditing(null); await load();\r\n    }catch(err){ alert(err?.body?.message||err?.message||'Save failed'); }\r\n  }\r\n\r\n  async function remove(id){ if(!confirm('Hapus hub?')) return; try{ await apiClient(`/master/hubs/${id}`, { method: 'DELETE' }); await load(); }catch(err){ alert(err?.body?.message||err?.message||'Delete failed'); } }\r\n\r\n  return (\r\n    <Box sx={{ p:2 }}>\r\n      <Box sx={{ display:'flex', justifyContent:'space-between', alignItems:'center', mb:2 }}>\r\n        <Box>\r\n          <Box component=\"h2\" sx={{ m:0 }}>Hubs</Box>\r\n          <Box sx={{ color:'text.secondary', fontSize:13 }}>Manage planner hubs</Box>\r\n        </Box>\r\n        <Box>\r\n          <Button variant=\"outlined\" onClick={load} startIcon={loading? <CircularProgress size={18}/> : null}>Refresh</Button>\r\n          <Button variant=\"contained\" sx={{ ml:1 }} startIcon={<AddIcon/>} onClick={openCreate}>Create Hub</Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      <Paper>\r\n        <TableContainer>\r\n          <Table size=\"small\">\r\n            <TableHead>\r\n              <TableRow><TableCell>ID</TableCell><TableCell>Code</TableCell><TableCell>Name</TableCell><TableCell>Description</TableCell><TableCell align=\"right\">Action</TableCell></TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {rows.map(r=> (\r\n                <TableRow key={r.id} hover>\r\n                  <TableCell>{r.id}</TableCell>\r\n                  <TableCell>{r.code||'-'}</TableCell>\r\n                  <TableCell>{r.name}</TableCell>\r\n                  <TableCell sx={{ maxWidth:300, overflow:'hidden', textOverflow:'ellipsis', whiteSpace:'nowrap' }}>{r.description}</TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <Tooltip title=\"Edit\"><IconButton size=\"small\" onClick={()=>openEdit(r)}><EditIcon fontSize=\"small\"/></IconButton></Tooltip>\r\n                    <Tooltip title=\"Delete\"><IconButton size=\"small\" color=\"error\" onClick={()=>remove(r.id)}><DeleteIcon fontSize=\"small\"/></IconButton></Tooltip>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Paper>\r\n\r\n      <Dialog open={modalOpen} onClose={()=>{ setModalOpen(false); setEditing(null); }} fullWidth>\r\n        <DialogTitle>{editing?.id? 'Edit Hub' : 'Create Hub'}</DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ display:'grid', gap:2, mt:1 }}>\r\n            <TextField label=\"Code\" size=\"small\" value={editing?.code||''} onChange={e=>setEditing({...editing, code: e.target.value})} />\r\n            <TextField label=\"Name\" size=\"small\" value={editing?.name||''} onChange={e=>setEditing({...editing, name: e.target.value})} />\r\n            <TextField label=\"Description\" size=\"small\" multiline minRows={3} value={editing?.description||''} onChange={e=>setEditing({...editing, description: e.target.value})} />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={()=>{ setModalOpen(false); setEditing(null); }}>Cancel</Button>\r\n          <Button variant=\"contained\" onClick={save}>Save</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}