{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/SigapPlanner/web/lib/api-client.ts"],"sourcesContent":["// lib/api-client.ts\r\nexport type ApiOptions = RequestInit & { body?: any };\r\n\r\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:4000/api';\r\n\r\nasync function handleResp(res: Response) {\r\n  const text = await res.text();\r\n  let data;\r\n  try { data = text ? JSON.parse(text) : undefined; } catch { data = text; }\r\n  if (!res.ok) {\r\n    const err: any = new Error(data?.message || res.statusText || 'API error');\r\n    err.status = res.status;\r\n    err.body = data;\r\n    throw err;\r\n  }\r\n  return data;\r\n}\r\n\r\nexport default async function apiClient(path: string, opts: ApiOptions = {}) {\r\n  const url = path.startsWith('http') ? path : `${API_BASE}${path.startsWith('/') ? '' : '/'}${path}`;\r\n\r\n  function getAuthHeader(): Record<string,string> {\r\n    try {\r\n      if (typeof window === 'undefined') return {};\r\n      const token = (localStorage.getItem('token') || '').trim();\r\n      return token ? { Authorization: `Bearer ${token}` } : {};\r\n    } catch (e) {\r\n      return {};\r\n    }\r\n  }\r\n\r\n  const headers: Record<string,string> = {\r\n    'Accept': 'application/json',\r\n    ...getAuthHeader(),\r\n    ...(opts.headers as Record<string,string> || {}),\r\n  };\r\n\r\n  let body: BodyInit | undefined;\r\n  if (opts.body !== undefined) {\r\n    headers['Content-Type'] = 'application/json';\r\n    body = JSON.stringify(opts.body);\r\n  }\r\n\r\n  try {\r\n    const res = await fetch(url, {\r\n      credentials: 'include',\r\n      ...opts,\r\n      headers,\r\n      body,\r\n    });\r\n    return await handleResp(res);\r\n  } catch (err: any) {\r\n    // If the error already comes from `handleResp` it may contain HTTP error details\r\n    // (status, body). Preserve those properties when rethrowing so callers can\r\n    // inspect `err.status` / `err.body` instead of losing them behind a wrapper.\r\n    if (err && (err as any).body !== undefined) {\r\n      // ensure url is available on the propagated error\r\n      try { (err as any).url = url; } catch (_) {}\r\n      throw err;\r\n    }\r\n\r\n    // Network-level error (CORS, DNS, connection refused, etc)\r\n    const e: any = new Error(err?.message || 'Network error');\r\n    e.detail = err;\r\n    e.url = url;\r\n    throw e;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;AAGH;AAAjB,MAAM,WAAW,kLAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAEpD,eAAe,WAAW,GAAa;IACrC,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,IAAI;IACJ,IAAI;QAAE,OAAO,OAAO,KAAK,KAAK,CAAC,QAAQ;IAAW,EAAE,OAAM;QAAE,OAAO;IAAM;IACzE,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAW,IAAI,MAAM,MAAM,WAAW,IAAI,UAAU,IAAI;QAC9D,IAAI,MAAM,GAAG,IAAI,MAAM;QACvB,IAAI,IAAI,GAAG;QACX,MAAM;IACR;IACA,OAAO;AACT;AAEe,eAAe,UAAU,IAAY,EAAE,OAAmB,CAAC,CAAC;IACzE,MAAM,MAAM,KAAK,UAAU,CAAC,UAAU,OAAO,GAAG,WAAW,KAAK,UAAU,CAAC,OAAO,KAAK,MAAM,MAAM;IAEnG,SAAS;QACP,IAAI;YACF;;YACA,MAAM,QAAQ,CAAC,aAAa,OAAO,CAAC,YAAY,EAAE,EAAE,IAAI;YACxD,OAAO,QAAQ;gBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;YAAC,IAAI,CAAC;QACzD,EAAE,OAAO,GAAG;YACV,OAAO,CAAC;QACV;IACF;IAEA,MAAM,UAAiC;QACrC,UAAU;QACV,GAAG,eAAe;QAClB,GAAI,KAAK,OAAO,IAA6B,CAAC,CAAC;IACjD;IAEA,IAAI;IACJ,IAAI,KAAK,IAAI,KAAK,WAAW;QAC3B,OAAO,CAAC,eAAe,GAAG;QAC1B,OAAO,KAAK,SAAS,CAAC,KAAK,IAAI;IACjC;IAEA,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,KAAK;YAC3B,aAAa;YACb,GAAG,IAAI;YACP;YACA;QACF;QACA,OAAO,MAAM,WAAW;IAC1B,EAAE,OAAO,KAAU;QACjB,iFAAiF;QACjF,2EAA2E;QAC3E,6EAA6E;QAC7E,IAAI,OAAO,AAAC,IAAY,IAAI,KAAK,WAAW;YAC1C,kDAAkD;YAClD,IAAI;gBAAG,IAAY,GAAG,GAAG;YAAK,EAAE,OAAO,GAAG,CAAC;YAC3C,MAAM;QACR;QAEA,2DAA2D;QAC3D,MAAM,IAAS,IAAI,MAAM,KAAK,WAAW;QACzC,EAAE,MAAM,GAAG;QACX,EAAE,GAAG,GAAG;QACR,MAAM;IACR;AACF"}},
    {"offset": {"line": 84, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/SigapPlanner/web/components/WorkOrderForm.tsx"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport apiClient from '../lib/api-client';\r\n\r\ntype Props = { onCreated?: () => void };\r\n\r\nexport default function WorkOrderForm({ onCreated }: Props) {\r\n  const [id, setId] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState<string | null>(null);\r\n\r\n  async function handleSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setMessage(null);\r\n    if (!id.trim()) return setMessage('Masukkan id SIGAP');\r\n    setLoading(true);\r\n    try {\r\n      const res = await apiClient('/work-orders/add', { method: 'POST', body: { id: id.trim() }});\r\n      setMessage('Work order tersimpan: ' + (res?.data?.doc_no || res?.data?.id || 'OK'));\r\n      setId('');\r\n      onCreated?.();\r\n    } catch (err: any) {\r\n      console.error('add error', err);\r\n      setMessage('Error: ' + (err.body?.detail || err.body?.message || err.message || 'gagal'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ display: 'flex', gap: 8, alignItems: 'center', marginBottom: 16 }}>\r\n      <input\r\n        value={id}\r\n        onChange={e => setId(e.target.value)}\r\n        placeholder=\"Masukkan id SIGAP (contoh: 1656)\"\r\n        disabled={loading}\r\n        style={{ padding: '8px 10px', minWidth: 260 }}\r\n      />\r\n      <button type=\"submit\" disabled={loading} style={{ padding: '8px 12px' }}>\r\n        {loading ? 'Mengambil...' : 'Ambil & Simpan'}\r\n      </button>\r\n      {message && <div style={{ marginLeft: 12 }}>{message}</div>}\r\n    </form>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAMe,SAAS,cAAc,EAAE,SAAS,EAAS;;IACxD,MAAM,CAAC,IAAI,MAAM,GAAG,IAAA,gLAAQ,EAAC;IAC7B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gLAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gLAAQ,EAAgB;IAEtD,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,WAAW;QACX,IAAI,CAAC,GAAG,IAAI,IAAI,OAAO,WAAW;QAClC,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,yIAAS,EAAC,oBAAoB;gBAAE,QAAQ;gBAAQ,MAAM;oBAAE,IAAI,GAAG,IAAI;gBAAG;YAAC;YACzF,WAAW,2BAA2B,CAAC,KAAK,MAAM,UAAU,KAAK,MAAM,MAAM,IAAI;YACjF,MAAM;YACN;QACF,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,aAAa;YAC3B,WAAW,YAAY,CAAC,IAAI,IAAI,EAAE,UAAU,IAAI,IAAI,EAAE,WAAW,IAAI,OAAO,IAAI,OAAO;QACzF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,oMAAC;QAAK,UAAU;QAAc,OAAO;YAAE,SAAS;YAAQ,KAAK;YAAG,YAAY;YAAU,cAAc;QAAG;;0BACrG,oMAAC;gBACC,OAAO;gBACP,UAAU,CAAA,IAAK,MAAM,EAAE,MAAM,CAAC,KAAK;gBACnC,aAAY;gBACZ,UAAU;gBACV,OAAO;oBAAE,SAAS;oBAAY,UAAU;gBAAI;;;;;;0BAE9C,oMAAC;gBAAO,MAAK;gBAAS,UAAU;gBAAS,OAAO;oBAAE,SAAS;gBAAW;0BACnE,UAAU,iBAAiB;;;;;;YAE7B,yBAAW,oMAAC;gBAAI,OAAO;oBAAE,YAAY;gBAAG;0BAAI;;;;;;;;;;;;AAGnD;GAtCwB;KAAA"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/SigapPlanner/web/components/WorkOrderList.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport apiClient from '../lib/api-client';\r\n\r\nexport type Activity = {\r\n  id?: string;\r\n  task_name?: string;\r\n  task_number?: number;\r\n  task_duration?: number;\r\n  [key: string]: any;\r\n};\r\n\r\nexport type WorkOrder = {\r\n  id: string;\r\n  doc_no?: string;\r\n  sigap_id?: number;\r\n  vendor_cabang?: string; // location field from external API\r\n  work_type?: string;\r\n  type_work?: string;\r\n  date_doc?: string;\r\n  asset_name?: string;\r\n  description?: string;\r\n  start_date?: string | null;\r\n  end_date?: string | null;\r\n  raw?: {\r\n    activities?: Activity[];\r\n    [key: string]: any;\r\n  };\r\n  tasks?: any[];\r\n  created_at?: string;\r\n  progress?: number;\r\n};\r\n\r\ntype Props = {\r\n  onRefreshRequested?: (fn: () => Promise<void>) => void;\r\n};\r\n\r\nexport default function WorkOrderList({ onRefreshRequested }: Props) {\r\n  // format stored dates (possibly SQL 'YYYY-MM-DD HH:mm:ss' without timezone)\r\n  function formatUtcDisplay(raw?: string | null) {\r\n    if (!raw) return '-';\r\n    const s = String(raw).trim();\r\n    // try SQL datetime 'YYYY-MM-DD HH:mm:ss' or 'YYYY-MM-DDTHH:mm:ss'\r\n    const sqlRx = /^(\\d{4})-(\\d{2})-(\\d{2})(?:[ T](\\d{2}):(\\d{2})(?::(\\d{2}))?)?$/;\r\n    const m = sqlRx.exec(s);\r\n    let dt: Date | null = null;\r\n    if (m) {\r\n      const [, yy, mm, dd, hh = '00', mi = '00', ss = '00'] = m as any;\r\n      // Interpret stored value as UTC (no timezone conversion)\r\n      dt = new Date(Date.UTC(Number(yy), Number(mm) - 1, Number(dd), Number(hh), Number(mi), Number(ss)));\r\n    } else {\r\n      // try parsing as ISO / fallback\r\n      const parsed = new Date(s);\r\n      if (!isNaN(parsed.getTime())) {\r\n        // use UTC values\r\n        dt = parsed;\r\n      } else {\r\n        return '-';\r\n      }\r\n    }\r\n\r\n    const pad = (n: number) => String(n).padStart(2, '0');\r\n    return `${pad(dt.getUTCDate())}/${pad(dt.getUTCMonth() + 1)}/${dt.getUTCFullYear()} ${pad(dt.getUTCHours())}:${pad(dt.getUTCMinutes())}`;\r\n  }\r\n  const [list, setList] = useState<WorkOrder[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [locations, setLocations] = useState<string[]>([]);\r\n  const [locationFilter, setLocationFilter] = useState<string>('');\r\n  const [statuses, setStatuses] = useState<string[]>([]);\r\n  const [statusFilter, setStatusFilter] = useState<string>('');\r\n\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize] = useState(10);\r\n  const [total, setTotal] = useState(0);\r\n  const [q, setQ] = useState('');\r\n\r\n  const [editing, setEditing] = useState<WorkOrder | null>(null);\r\n  const [editLoading, setEditLoading] = useState(false);\r\n\r\n  const [taskModal, setTaskModal] = useState<{ open: boolean; wo: WorkOrder | null }>({ open: false, wo: null });\r\n  const [technicians, setTechnicians] = useState<Array<any>>([]);\r\n  const [techQuery, setTechQuery] = useState<string>('');\r\n  const [selectedAssignees, setSelectedAssignees] = useState<Record<string, string[]>>({});\r\n  const [currentUser, setCurrentUser] = useState<any | null>(undefined);\r\n\r\n  async function load(p = page, query = q, location = locationFilter) {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const params = new URLSearchParams();\r\n      if (query) params.set('q', query);\r\n      params.set('page', String(p));\r\n      params.set('pageSize', String(pageSize));\r\n      if (location) params.set('location', location);\r\n      const res = await apiClient(`/work-orders?${params.toString()}`);\r\n      const data = Array.isArray(res) ? res : (res?.data ?? []);\r\n      const meta = (res && typeof res === 'object' && !Array.isArray(res)) ? (res.meta ?? { page: p, pageSize, total: 0 }) : { page: p, pageSize, total: 0 };\r\n      const listData = Array.isArray(data) ? data : [];\r\n      // derive available locations from returned (unfiltered) data\r\n      const allListData = listData;\r\n      const locs = Array.from(new Set(allListData.map((w: WorkOrder) => (w.vendor_cabang ?? w.raw?.vendor_cabang ?? '').toString().trim()).filter(Boolean)));\r\n      const sts = Array.from(new Set(allListData.map((w: WorkOrder) => ((w as any).status ?? w.raw?.status ?? 'NEW').toString().trim()).filter(Boolean)));\r\n      setStatuses(sts);\r\n      setLocations(locs);\r\n      // apply client-side filtering by location (case-insensitive) so filter works\r\n      let displayed = allListData;\r\n      console.debug('test ', allListData);\r\n      if (location) {\r\n        const low = location.toString().toLowerCase().trim();\r\n        displayed = allListData.filter((w: WorkOrder) => {\r\n          const v = (w.vendor_cabang ?? w.raw?.vendor_cabang ?? '').toString().toLowerCase().trim();\r\n          return v === low;\r\n        });\r\n      }\r\n      // apply client-side filtering by status if requested\r\n      if (statusFilter) {\r\n        const sf = statusFilter.toString().toLowerCase().trim();\r\n        displayed = displayed.filter((w: WorkOrder) => {\r\n          const s = ((w as any).status ?? w.raw?.status ?? 'NEW').toString().toLowerCase().trim();\r\n          return s === sf;\r\n        });\r\n      }\r\n      setList(displayed);\r\n      setTotal(typeof meta.total === 'number' ? meta.total : 0);\r\n    } catch (err: any) {\r\n      console.error('load work orders', err);\r\n      setError(err?.body?.message || err?.message || 'Gagal memuat');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => { load(1, q); setPage(1); }, [q, locationFilter, statusFilter]);\r\n\r\n  // expose the refresh function to parent via callback (so WorkOrderForm can trigger it)\r\n  useEffect(() => {\r\n    if (typeof onRefreshRequested === 'function') {\r\n      onRefreshRequested(async () => {\r\n        await load(1, q, locationFilter);\r\n        setPage(1);\r\n      });\r\n    }\r\n    // we intentionally omit onRefreshRequested from deps to only register once on mount\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  function onPrev() { if (page > 1) { setPage(p => { const np = p - 1; load(np); return np; }); } }\r\n  function onNext() { const maxPage = Math.ceil(total / pageSize); if (page < maxPage) { setPage(p => { const np = p + 1; load(np); return np; }); } }\r\n\r\n  function openEdit(w: WorkOrder) {\r\n    setEditing(w);\r\n  }\r\n\r\n  function openTaskModal(w: WorkOrder) {\r\n    console.debug('[openTaskModal]');\r\n    console.debug('workorder:', w);\r\n    // Require start_date on work order. If missing, prompt user to fill dates first.\r\n    if (!w.start_date) {\r\n      alert('Work Order belum memiliki Start Date. Isi Start Date dan End Date terlebih dahulu.');\r\n      setEditing(w);\r\n      return;\r\n    }\r\n\r\n    // reset technician search and selections when opening modal\r\n    setTechQuery('');\r\n    setTechnicians([]);\r\n    setSelectedAssignees({});\r\n    setTaskModal({ open: true, wo: w });\r\n    // load technicians (users with role=technician) and workorder detail (assignments)\r\n    (async () => {\r\n      let filteredTechs: any[] = [];\r\n      try {\r\n        // determine workorder site/location (use vendor_cabang or raw.site)\r\n        const woSiteRaw = (w.vendor_cabang ?? w.raw?.vendor_cabang ?? w.raw?.site ?? '');\r\n        const woSite = String(woSiteRaw || '').toLowerCase().trim();\r\n        // determine assignment date/time from workorder start_date (must exist)\r\n        // parse stored start_date robustly and interpret SQL datetimes without timezone as UTC\r\n        const pad = (n: number) => String(n).padStart(2, '0');\r\n        function parseToUtcDate(val?: string | null): Date | null {\r\n          if (!val) return null;\r\n          const s = String(val).trim();\r\n          const sqlRx = /^(\\d{4})-(\\d{2})-(\\d{2})(?:[ T](\\d{2}):(\\d{2})(?::(\\d{2}))?)?$/;\r\n          const m = sqlRx.exec(s);\r\n          if (m) {\r\n            const [, yy, mm, dd, hh = '00', mi = '00', ss = '00'] = m as any;\r\n            return new Date(Date.UTC(Number(yy), Number(mm) - 1, Number(dd), Number(hh), Number(mi), Number(ss)));\r\n          }\r\n          const parsed = new Date(s);\r\n          if (!isNaN(parsed.getTime())) return parsed;\r\n          return null;\r\n        }\r\n\r\n        const sdUtc = parseToUtcDate(String(w.start_date));\r\n        if (!sdUtc) {\r\n          alert('Start Date tidak valid. Isi Start Date yang benar terlebih dahulu.');\r\n          setEditing(w);\r\n          return;\r\n        }\r\n        const assignDate = `${sdUtc.getUTCFullYear()}-${pad(sdUtc.getUTCMonth() + 1)}-${pad(sdUtc.getUTCDate())}`;\r\n        const assignTime = `${pad(sdUtc.getUTCHours())}:${pad(sdUtc.getUTCMinutes())}`;\r\n        console.debug('[openTaskModal] assignDate/time (local)', { assignDate, assignTime, raw: w.start_date });\r\n        const schedUrl = `/scheduled-technicians?date=${encodeURIComponent(assignDate)}&time=${encodeURIComponent(assignTime)}` + (woSite ? `&site=${encodeURIComponent(woSite)}` : '');\r\n        console.debug(schedUrl);\r\n\r\n        try {\r\n          console.debug('[openTaskModal] fetching scheduled technicians', { schedUrl });\r\n          const sched = await apiClient(schedUrl);\r\n          console.debug(sched);\r\n\r\n          const schedRows = Array.isArray(sched) ? sched : (sched?.data ?? []);\r\n          console.debug('[openTaskModal] scheduled-technicians response', { count: Array.isArray(schedRows) ? schedRows.length : 0 });\r\n          if (schedRows && schedRows.length > 0) {\r\n            filteredTechs = schedRows;\r\n            console.debug('[openTaskModal] using scheduled-technicians sample', (schedRows as any[]).slice(0, 5));\r\n          } else {\r\n            // fallback: load site-filtered technicians\r\n            // console.log('[openTaskModal] scheduled-technicians empty — falling back to /users?role=technician');\r\n            // const techs = await apiClient('/users?role=technician');\r\n            // const list = Array.isArray(techs) ? techs : (techs?.data ?? []);\r\n            // console.log('[openTaskModal] /users?role=technician response', { count: Array.isArray(list) ? list.length : 0 });\r\n            // if (woSite) {\r\n            //   filteredTechs = list.filter((t: any) => {\r\n            //     const tSite = String(t.site ?? t.vendor_cabang ?? t.location ?? '').toLowerCase().trim();\r\n            //     return tSite === woSite;\r\n            //   });\r\n            //   console.log('[openTaskModal] after site-filtering technicians', { count: filteredTechs.length });\r\n            // } else {\r\n            //   filteredTechs = list;\r\n            // }\r\n            filteredTechs = schedRows;\r\n          }\r\n        } catch (e) {\r\n          console.warn('scheduled-technicians fetch failed, falling back', e);\r\n          const techs = await apiClient('/users?role=technician');\r\n          const list = Array.isArray(techs) ? techs : (techs?.data ?? []);\r\n          console.debug('[openTaskModal] fallback /users?role=technician response', { count: Array.isArray(list) ? list.length : 0 });\r\n          filteredTechs = list;\r\n        }\r\n\r\n        console.debug('[openTaskModal] final filteredTechs', { count: filteredTechs.length, sample: filteredTechs.slice(0, 5) });\r\n        setTechnicians(filteredTechs);\r\n      } catch (e) {\r\n        console.warn('Failed to load technicians from shift assignments', e);\r\n        setTechnicians([]);\r\n        filteredTechs = [];\r\n      }\r\n\r\n      // load full workorder detail to get existing assignments and tasks\r\n      try {\r\n        const res = await apiClient(`/work-orders/${encodeURIComponent(w.id)}`);\r\n        const woDetail = res?.data ?? res;\r\n        // load tasks for this work order (fallback to raw.activities if no tasks)\r\n        try {\r\n          console.debug('[openTaskModal] fetching tasks for workorder', { workOrderId: w.id });\r\n          const tasksRes = await apiClient(`/work-orders/${encodeURIComponent(w.id)}/tasks`);\r\n          const tasks = Array.isArray(tasksRes) ? tasksRes : (tasksRes?.data ?? []);\r\n          console.debug('[openTaskModal] tasks fetch result', { count: Array.isArray(tasks) ? tasks.length : 0, sample: (tasks as any[]).slice(0, 5) });\r\n          // attach tasks to woDetail for modal rendering\r\n          woDetail.tasks = tasks;\r\n        } catch (e) {\r\n          console.debug('[openTaskModal] /tasks fetch failed, falling back to raw.activities', e);\r\n          // fallback: map raw.activities -> tasks for display\r\n          const acts = Array.isArray(woDetail.raw?.activities) ? woDetail.raw.activities : [];\r\n          woDetail.tasks = acts.map((act: any, idx: number) => ({ id: `raw-${idx}`, name: act.task_name || act.name || `Task ${idx + 1}`, duration_min: act.task_duration }));\r\n        }\r\n        // update modal workorder with full details (assignments)\r\n        setTaskModal({ open: true, wo: woDetail });\r\n\r\n        // build selectedAssignees from task.assignments for each task (tasks came from /work-orders/:id/tasks)\r\n        const nextSelected: Record<string, string[]> = {};\r\n        const taskRows = Array.isArray(woDetail.tasks) ? woDetail.tasks : [];\r\n        // only pre-check assignments whose assignee is present in the filtered technician list\r\n        const techIds = new Set((Array.isArray(filteredTechs) ? filteredTechs : []).map(t => String(t.id)));\r\n        console.debug('[openTaskModal] building selectedAssignees from task.assignments', { taskCount: taskRows.length, techIdsCount: techIds.size });\r\n        for (const t of taskRows) {\r\n          const key = String(t.id ?? t.task_id ?? t.external_id ?? '');\r\n          if (!key) continue;\r\n          const assigns = Array.isArray(t.assignments) ? t.assignments : [];\r\n          const keeps: string[] = [];\r\n          for (const a of assigns) {\r\n            const assId = String(a?.user?.id ?? a.user_id ?? a.userId ?? '');\r\n            if (!assId) continue;\r\n            if (!techIds.has(assId)) {\r\n              console.debug('[openTaskModal] skipping assignment because assignee not in filtered technicians', { assId, key });\r\n              continue;\r\n            }\r\n            if (!keeps.includes(assId)) keeps.push(assId);\r\n          }\r\n          if (keeps.length > 0) nextSelected[key] = keeps;\r\n        }\r\n        console.debug('[openTaskModal] selectedAssignees prepared', nextSelected);\r\n        setSelectedAssignees(nextSelected);\r\n      } catch (err) {\r\n        console.warn('Failed to load workorder detail', err);\r\n      }\r\n\r\n      // load current user info (auth status)\r\n      try {\r\n        const me = await apiClient('/auth/me');\r\n        setCurrentUser(me?.data ?? me);\r\n      } catch (err) {\r\n        // if unauthorized or error, mark as not authenticated\r\n        setCurrentUser(null);\r\n      }\r\n    })();\r\n  }\r\n\r\n  function closeTaskModal() {\r\n    setTaskModal({ open: false, wo: null });\r\n    // reset tech query so checklist isn't filtered on next open\r\n    setTechQuery('');\r\n    // refresh work order list so changes made in the modal are reflected\r\n    try {\r\n      load(page, q);\r\n    } catch (e) {\r\n      console.warn('Failed to refresh work order list after closing modal', e);\r\n    }\r\n  }\r\n\r\n  async function saveEdit(id: string, start_date?: string | null, end_date?: string | null) {\r\n    setEditLoading(true);\r\n    try {\r\n      const body: any = {};\r\n      if (start_date !== undefined) body.start_date = start_date || null;\r\n      if (end_date !== undefined) body.end_date = end_date || null;\r\n\r\n      await apiClient(`/work-orders/${encodeURIComponent(id)}`, { method: 'PATCH', body });\r\n      load(page, q);\r\n      setEditing(null);\r\n    } catch (err: any) {\r\n      console.error('save edit', err);\r\n      alert('Gagal menyimpan: ' + (err?.body?.message || err?.message));\r\n    } finally {\r\n      setEditLoading(false);\r\n    }\r\n  }\r\n\r\n  function toInputDatetime(iso?: string | null) {\r\n    if (!iso) return '';\r\n    const d = new Date(iso);\r\n    if (isNaN(d.getTime())) return '';\r\n    const pad = (n: number) => String(n).padStart(2, '0');\r\n    return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}`;\r\n  }\r\n\r\n  function parseDdMMyyyyToIso(input?: string | null) {\r\n    if (!input) return null;\r\n    const s = input.toString().trim();\r\n    // expect 'dd/mm/yyyy HH:MM' or 'dd/mm/yyyy'\r\n    const rx = /^(\\d{2})\\/(\\d{2})\\/(\\d{4})(?:[ T](\\d{2}):(\\d{2}))?$/;\r\n    const m = rx.exec(s);\r\n    if (!m) return null;\r\n    const dd = parseInt(m[1], 10);\r\n    const mm = parseInt(m[2], 10);\r\n    const yyyy = parseInt(m[3], 10);\r\n    const hh = m[4] ? parseInt(m[4], 10) : 0;\r\n    const mi = m[5] ? parseInt(m[5], 10) : 0;\r\n    const dt = new Date(Date.UTC(yyyy, mm - 1, dd, hh, mi, 0));\r\n    if (isNaN(dt.getTime())) return null;\r\n    return dt.toISOString();\r\n  }\r\n\r\n  function getColorForStatus(s: string) {\r\n    const k = (s || '').toString().toUpperCase();\r\n    switch (k) {\r\n      case 'ASSIGNED': return '#0ea5e9'; // blue\r\n      case 'DEPLOYED': return '#06b6d4'; // teal\r\n      case 'READY_TO_DEPLOY': return '#7c3aed'; // purple\r\n      case 'IN_PROGRESS': return '#f97316'; // orange\r\n      case 'IN-PROGRESS': return '#f97316';\r\n      case 'COMPLETED': return '#10b981'; // green\r\n      case 'NEW': return '#64748b'; // gray\r\n      case 'OPEN': return '#64748b';\r\n      case 'CANCELLED': return '#ef4444';\r\n      case 'CLOSED': return '#334155';\r\n      default: return '#6b7280';\r\n    }\r\n  }\r\n\r\n  function shouldShowAssignColumn(wo: WorkOrder | null) {\r\n    const s = ((wo as any)?.status ?? wo?.raw?.status ?? '').toString().toUpperCase().replace(/[-\\s]/g, '_');\r\n    return !(s === 'IN_PROGRESS' || s === 'COMPLETED');\r\n  }\r\n\r\n  function renderStatusBadge(s: string) {\r\n    const color = getColorForStatus(s);\r\n    return (\r\n      <span style={{ display: 'inline-block', padding: '4px 8px', borderRadius: 999, background: color, color: 'white', fontSize: 12, fontWeight: 600 }}>\r\n        {String(s).replace('_', ' ')}\r\n      </span>\r\n    );\r\n  }\r\n\r\n  async function handleDeploy(woId: string) {\r\n    try {\r\n      await apiClient(`/work-orders/${encodeURIComponent(woId)}/deploy`, { method: 'POST' });\r\n      // refresh modal and list\r\n      const woRes = await apiClient(`/work-orders/${encodeURIComponent(woId)}`);\r\n      const woDetail = woRes?.data ?? woRes;\r\n      const tasksRes = await apiClient(`/work-orders/${encodeURIComponent(woId)}/tasks`);\r\n      const tasks = Array.isArray(tasksRes) ? tasksRes : (tasksRes?.data ?? []);\r\n      setTaskModal(prev => ({ ...(prev || {}), wo: { ...(prev?.wo || {}), ...woDetail, tasks } } as any));\r\n      load(page, q);\r\n    } catch (e) {\r\n      console.error('deploy failed', e);\r\n      alert('Deploy gagal: ' + (e?.message || e));\r\n    }\r\n  }\r\n\r\n  async function handleUndeploy(woId: string) {\r\n    try {\r\n      await apiClient(`/work-orders/${encodeURIComponent(woId)}/undeploy`, { method: 'POST' });\r\n      const woRes = await apiClient(`/work-orders/${encodeURIComponent(woId)}`);\r\n      const woDetail = woRes?.data ?? woRes;\r\n      const tasksRes = await apiClient(`/work-orders/${encodeURIComponent(woId)}/tasks`);\r\n      const tasks = Array.isArray(tasksRes) ? tasksRes : (tasksRes?.data ?? []);\r\n      setTaskModal(prev => ({ ...(prev || {}), wo: { ...(prev?.wo || {}), ...woDetail, tasks } } as any));\r\n      load(page, q);\r\n    } catch (e) {\r\n      console.error('undeploy failed', e);\r\n      alert('Undeploy gagal: ' + (e?.message || e));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ display: 'flex', gap: 8, marginBottom: 12, alignItems: 'center' }}>\r\n        <select value={locationFilter} onChange={e => { setLocationFilter(e.target.value); }} style={{ padding: 8 }}>\r\n          <option value=\"\">Semua Lokasi</option>\r\n          {locations.map(loc => (\r\n            <option key={loc} value={loc}>{loc}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <select value={statusFilter} onChange={e => { setStatusFilter(e.target.value); }} style={{ padding: 8 }}>\r\n          <option value=\"\">Semua Status</option>\r\n          {statuses.map(s => (\r\n            <option key={s} value={s}>{s}</option>\r\n          ))}\r\n        </select>\r\n\r\n        <input placeholder=\"Search doc_no / asset / desc\" value={q} onChange={e => setQ(e.target.value)} style={{ flex: 1, padding: 8 }} />\r\n        <button onClick={() => load(1, q)} disabled={loading} style={{ padding: '8px 12px' }}>Search</button>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: 8 }}>\r\n        <button onClick={() => load(1, q)} disabled={loading}>Refresh</button>\r\n        <span style={{ marginLeft: 12 }}>{total} item</span>\r\n      </div>\r\n\r\n      {loading ? <div>Loading...</div> : null}\r\n      {error ? <div style={{ color: 'red' }}>{error}</div> : null}\r\n\r\n      <div style={{ overflowX: 'auto' }}>\r\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Doc No</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Jenis Work Order</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Start</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>End</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Asset</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Status</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Location</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Desc</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Progress</th>\r\n              <th style={{ textAlign: 'left', padding: 8, borderBottom: '1px solid #ccc' }}>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {list.map(w => {\r\n              const activities = (w.raw?.activities ?? []) as Activity[];\r\n              const statusRaw = ((w as any).status ?? w.raw?.status ?? 'NEW').toString();\r\n              const statusNorm = statusRaw.toUpperCase().replace(/[-\\s]/g, '_');\r\n              return (\r\n                <tr key={w.id}>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>{w.doc_no ?? w.id}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>{w.work_type ?? w.type_work ?? w.raw?.work_type ?? w.raw?.type_work ?? '-'}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>{formatUtcDisplay(w.start_date)}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>{formatUtcDisplay(w.end_date)}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>{w.asset_name ?? '-'}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>\r\n                    {renderStatusBadge((w as any).status ?? w.raw?.status ?? 'NEW')}\r\n                  </td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee' }}>{w.vendor_cabang ?? w.raw?.vendor_cabang ?? '-'}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee', maxWidth: 200, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>{w.description ?? '-'}</td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee', width: 160 }}>\r\n                    {statusNorm === 'IN_PROGRESS' && typeof (w as any).progress === 'number' ? (\r\n                      (() => {\r\n                        const prog = Math.max(0, Math.min(1, (w as any).progress || 0));\r\n                        const statusColor = getColorForStatus(statusRaw);\r\n                        return (\r\n                          <div style={{ display: 'flex', flexDirection: 'column', gap: 6 }}>\r\n                            <div style={{ fontSize: 12, fontWeight: 700 }}>{Math.round(prog * 100)}%</div>\r\n                            <div style={{ height: 10, background: '#f1f5f9', borderRadius: 6, overflow: 'hidden' }}>\r\n                              <div style={{ width: `${Math.round(prog * 100)}%`, height: '100%', background: statusColor }} />\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })()\r\n                    ) : (\r\n                      <div style={{ color: '#777' }}>-</div>\r\n                    )}\r\n                  </td>\r\n                  <td style={{ padding: 8, borderBottom: '1px solid #eee', display: 'flex', gap: 6 }}>\r\n                    {Array.isArray(activities) && activities.length > 0 && (\r\n                      <button onClick={() => openTaskModal(w)} style={{ padding: '4px 8px', fontSize: '0.9em' }}>\r\n                        Lihat Task ({activities.length})\r\n                      </button>\r\n                    )}\r\n                    {!(statusNorm === 'IN_PROGRESS' || statusNorm === 'COMPLETED' || statusNorm === 'DEPLOYED') && (\r\n                      <button onClick={() => openEdit(w)} style={{ padding: '4px 8px', fontSize: '0.9em' }}>Edit Dates</button>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 12, display: 'flex', gap: 8, alignItems: 'center' }}>\r\n        <button onClick={onPrev} disabled={page <= 1}>Prev</button>\r\n        <div>Page {page} / {Math.max(1, Math.ceil(total / pageSize))}</div>\r\n        <button onClick={onNext} disabled={page >= Math.max(1, Math.ceil(total / pageSize))}>Next</button>\r\n      </div>\r\n\r\n      {/* Task Modal */}\r\n      {taskModal.open && taskModal.wo && (\r\n        <div style={{\r\n          position: 'fixed', left: 0, right: 0, top: 0, bottom: 0, background: 'rgba(0,0,0,0.5)',\r\n          display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 2000, padding: 16\r\n        }}>\r\n          <div style={{ background: 'white', padding: 16, width: '95%', maxWidth: 900, borderRadius: 8, maxHeight: '86vh', overflow: 'auto', boxShadow: '0 6px 30px rgba(0,0,0,0.2)' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', gap: 12, marginBottom: 12 }}>\r\n              <div style={{ flex: 1 }}>\r\n                <h2 style={{ marginTop: 0, marginBottom: 6, fontSize: 20 }}>Task - {taskModal.wo.doc_no ?? taskModal.wo.id}</h2>\r\n                <div style={{ color: '#666', fontSize: 13 }}>{taskModal.wo.description}</div>\r\n              </div>\r\n              <div style={{ textAlign: 'right', minWidth: 180 }}>\r\n                <div style={{ fontSize: 13, marginBottom: 8 }}>\r\n                  {currentUser === undefined ? (\r\n                    <span style={{ color: '#666' }}>Checking auth...</span>\r\n                  ) : currentUser === null ? (\r\n                    <span style={{ color: '#c00' }}>Not authenticated</span>\r\n                  ) : (\r\n                    <div>\r\n                      <div style={{ fontWeight: 700 }}>{currentUser.name || currentUser.username || currentUser.email}</div>\r\n                      <div style={{ color: '#666', fontSize: 12 }}>{currentUser.email} — {currentUser.role ?? currentUser.type}</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <div style={{ display: 'flex', gap: 8, justifyContent: 'flex-end' }}>\r\n                  {(taskModal.wo as any)?.status === 'READY_TO_DEPLOY' && (\r\n                    <button onClick={() => handleDeploy(taskModal.wo!.id)} style={{ padding: '6px 10px', background: '#7c3aed', color: 'white', borderRadius: 6 }}>Deploy</button>\r\n                  )}\r\n                  {(taskModal.wo as any)?.status === 'DEPLOYED' && (\r\n                    <button onClick={() => handleUndeploy(taskModal.wo!.id)} style={{ padding: '6px 10px', background: '#ef4444', color: 'white', borderRadius: 6 }}>Undeploy</button>\r\n                  )}\r\n                  <button onClick={closeTaskModal} style={{ padding: '6px 10px' }}>Close</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={{ marginBottom: 8 }}>\r\n              <table style={{ width: '100%', borderCollapse: 'collapse', tableLayout: 'fixed' }}>\r\n                <colgroup>\r\n                  <col style={{ width: '50px' }} />\r\n                  <col />\r\n                  <col style={{ width: '110px' }} />\r\n                  <col style={{ width: '340px' }} />\r\n                </colgroup>\r\n                <thead>\r\n                  <tr style={{ background: '#f5f5f5' }}>\r\n                    <th style={{ textAlign: 'left', padding: 12, borderBottom: '1px solid #ddd' }}>No</th>\r\n                    <th style={{ textAlign: 'left', padding: 12, borderBottom: '1px solid #ddd' }}>Task Name</th>\r\n                    <th style={{ textAlign: 'left', padding: 12, borderBottom: '1px solid #ddd', textAlignLast: 'right' }}>Duration (min)</th>\r\n                    {shouldShowAssignColumn(taskModal.wo as any) && (\r\n                      <th style={{ textAlign: 'left', padding: 12, borderBottom: '1px solid #ddd' }}>Assign technicians</th>\r\n                    )}\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {Array.isArray(taskModal.wo.tasks) && taskModal.wo.tasks.map((act: any, idx: number) => {\r\n                    const taskKey = (act.id ?? act.task_id ?? String(idx));\r\n                    const selected = selectedAssignees[taskKey] || [];\r\n                    // robust detection for whether task has realisasi\r\n                    function taskHasRealisasi(t: any) {\r\n                      try {\r\n                        // 1) task-local explicit lists (common patterns)\r\n                        const lists = ['realisasi','realisasis','realisasi_list','realisasi_entries','realisasiItems','realisasi_items','realisasiEntries'];\r\n                        for (const k of lists) {\r\n                          const v = t[k];\r\n                          if (Array.isArray(v) && v.length > 0) return true;\r\n                        }\r\n\r\n                        // 2) assignment records that are attached directly to the task (if present)\r\n                        if (Array.isArray(t.assignments)) {\r\n                          for (const a of t.assignments) {\r\n                            if (Array.isArray(a.realisasi) && a.realisasi.length > 0) return true;\r\n                            if ((a.realisasi_count || a.realisasiCount || a.realisasiTotal) > 0) return true;\r\n                            const s = (a.status || a.state || '').toString().toUpperCase();\r\n                            if (s.includes('COMP') || s.includes('VERIF') || s.includes('DONE') || s.includes('APPROV')) return true;\r\n                          }\r\n                        }\r\n\r\n                        // 3) workorder-level assignments: some data models store realisasi on a separate `assignment` table\r\n                        const woAssigns = Array.isArray((taskModal.wo as any)?.assignments) ? (taskModal.wo as any).assignments : [];\r\n                        if (woAssigns.length > 0) {\r\n                          for (const a of woAssigns) {\r\n                            // match by explicit task_id first, then by name fallback\r\n                            const aTaskId = (a.task_id ?? a.taskId ?? a.task?.id) ? String(a.task_id ?? a.taskId ?? a.task?.id) : null;\r\n                            const tId = (t.id ?? t.task_id ?? t.external_id) ? String(t.id ?? t.task_id ?? t.external_id) : null;\r\n                            if (aTaskId && tId && aTaskId === tId) {\r\n                              if (Array.isArray(a.realisasi) && a.realisasi.length > 0) return true;\r\n                              if ((a.realisasi_count || a.realisasiCount || a.realisasiTotal) > 0) return true;\r\n                              const s = (a.status || a.state || '').toString().toUpperCase();\r\n                              if (s.includes('COMP') || s.includes('VERIF') || s.includes('DONE') || s.includes('APPROV')) return true;\r\n                            }\r\n                            // name-based fallback (older rows)\r\n                            const aName = (a.task_name || a.taskName || a.task?.name || '').toString().trim().toLowerCase();\r\n                            const tName = (t.name || t.task_name || t.taskName || '').toString().trim().toLowerCase();\r\n                            if (aName && tName && aName === tName) {\r\n                              if (Array.isArray(a.realisasi) && a.realisasi.length > 0) return true;\r\n                              if ((a.realisasi_count || a.realisasiCount || a.realisasiTotal) > 0) return true;\r\n                              const s2 = (a.status || a.state || '').toString().toUpperCase();\r\n                              if (s2.includes('COMP') || s2.includes('VERIF') || s2.includes('DONE') || s2.includes('APPROV')) return true;\r\n                            }\r\n                          }\r\n                        }\r\n\r\n                        // 4) task-level flags and timestamps\r\n                        if (t.completed === true || t.is_completed === true || String(t.status || '').toUpperCase().includes('COMP')) return true;\r\n                        if (t.completed_at || t.realisasi_at || t.approved_at) return true;\r\n                      } catch (e) {\r\n                        // ignore\r\n                      }\r\n                      return false;\r\n                    }\r\n                    const hasRealisasi = taskHasRealisasi(act) || Boolean(act.has_realisasi || act.realisasi_count);\r\n                    return (\r\n                      <tr key={idx} style={{ borderBottom: '1px solid #f1f1f1' }}>\r\n                        <td style={{ padding: 12, verticalAlign: 'top' }}>{act.task_number ?? idx + 1}</td>\r\n                        <td style={{ padding: 12, verticalAlign: 'top' }}>\r\n                          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\r\n                            <div style={{ fontWeight: 700 }}>{act.name ?? act.task_name ?? '-'}</div>\r\n                            {hasRealisasi ? (\r\n                              <span style={{ background: '#10b981', color: 'white', padding: '2px 8px', borderRadius: 999, fontSize: 12, fontWeight: 600 }}>Realisasi ✓</span>\r\n                            ) : (\r\n                              (() => {\r\n                                const pendingCount = Number(act.pending_realisasi_count || act.pendingCount || 0);\r\n                                const hasPending = Boolean(act.has_pending || pendingCount > 0);\r\n                                if (hasPending) {\r\n                                  return <span style={{ background: '#f59e0b', color: 'white', padding: '2px 8px', borderRadius: 999, fontSize: 12, fontWeight: 600 }}>Pending{pendingCount ? ` (${pendingCount})` : ''}</span>;\r\n                                }\r\n                                // explicit 'Belum Realisasi' state when neither realisasi nor pending exist\r\n                                return <span style={{ background: '#64748b', color: 'white', padding: '2px 8px', borderRadius: 999, fontSize: 12, fontWeight: 600 }}>Belum Realisasi</span>;\r\n                              })()\r\n                            )}\r\n                          </div>\r\n                          <div style={{ fontSize: 12, color: '#888', marginTop: 6 }}>ID: {act.id ?? '-'}</div>\r\n                          {/* show already-assigned technicians */}\r\n                          {Array.isArray(act.assignments) && act.assignments.length > 0 && (\r\n                            <div style={{ marginTop: 8, display: 'flex', gap: 8, flexWrap: 'wrap' }}>\r\n                              {act.assignments.map((asgn: any) => (\r\n                                <div key={asgn.id} style={{ background: '#eef2ff', padding: '4px 8px', borderRadius: 6, display: 'flex', gap: 8, alignItems: 'center' }}>\r\n                                  <span style={{ fontSize: 13, fontWeight: 600 }}>{asgn.user?.name ?? asgn.user?.nipp ?? asgn.user?.email ?? asgn.assigned_to ?? 'Unknown'}</span>\r\n                                  {currentUser && !['DEPLOYED', 'IN_PROGRESS'].includes(((taskModal.wo as any)?.status ?? '').toString()) && (\r\n                                    <button onClick={async () => {\r\n                                      try {\r\n                                        await apiClient(`/tasks/${encodeURIComponent(act.id)}/assign/${encodeURIComponent(asgn.id)}`, { method: 'DELETE' });\r\n                                      } catch (err) {\r\n                                        // some servers expect /tasks/:id/assign/:assignId via task routes; try that as fallback\r\n                                        try {\r\n                                          await apiClient(`/tasks/${encodeURIComponent(act.id)}/assign/${encodeURIComponent(asgn.id)}`, { method: 'DELETE' });\r\n                                        } catch (e) { console.error('unassign failed', e); alert('Unassign failed'); return; }\r\n                                      }\r\n                                      // refresh workorder detail and tasks for this workorder\r\n                                      try {\r\n                                        const woRes = await apiClient(`/work-orders/${encodeURIComponent(taskModal.wo?.id)}`);\r\n                                        const woDetail = woRes?.data ?? woRes;\r\n                                        const tasksRes = await apiClient(`/work-orders/${encodeURIComponent(taskModal.wo?.id)}/tasks`);\r\n                                        const tasks = Array.isArray(tasksRes) ? tasksRes : (tasksRes?.data ?? []);\r\n                                        setTaskModal(prev => ({ ...(prev || {}), wo: { ...(prev?.wo || {}), ...woDetail, tasks } } as any));\r\n                                      } catch (e) { console.warn('refresh workorder after unassign failed', e); }\r\n                                    }} style={{ background: 'transparent', border: 'none', color: '#c00', cursor: 'pointer' }}>Unassign</button>\r\n                                  )}\r\n                                </div>\r\n                              ))}\r\n                            </div>\r\n                          )}\r\n                        </td>\r\n                        <td style={{ padding: 12, verticalAlign: 'top', textAlign: 'right' }}>{(act.duration_min ?? act.task_duration) ?? '-'}</td>\r\n                        {shouldShowAssignColumn(taskModal.wo as any) ? (\r\n                          <td style={{ padding: 12, verticalAlign: 'top' }}>\r\n                            <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\r\n                              <input\r\n                                placeholder=\"Cari teknisi (nama / email / id)\"\r\n                                value={techQuery}\r\n                                onChange={e => setTechQuery(e.target.value)}\r\n                                style={{ width: '100%', padding: 8, border: '1px solid #eee', borderRadius: 6 }}\r\n                              />\r\n\r\n                              <div style={{ maxHeight: '36vh', minHeight: 120, overflowY: 'auto', overflowX: 'hidden', border: '1px solid #eee', padding: 8, borderRadius: 6, background: '#fff' }}>\r\n                                {(() => {\r\n                                  const q = (techQuery || '').toString().toLowerCase().trim();\r\n                                  const filtered = technicians.filter((t: any) => {\r\n                                    if (!q) return true;\r\n                                    const name = (t.name || '').toString().toLowerCase();\r\n                                    const email = (t.email || '').toString().toLowerCase();\r\n                                    const idS = (t.id || '').toString().toLowerCase();\r\n                                    return name.includes(q) || email.includes(q) || idS.includes(q);\r\n                                  });\r\n                                  if (!filtered || filtered.length === 0) {\r\n                                    return <div style={{ color: '#666', fontSize: 13, padding: 8 }}>No technicians found</div>;\r\n                                  }\r\n                                  return filtered.map((t: any) => (\r\n                                    <label key={t.id} style={{ display: 'flex', gap: 8, alignItems: 'center', padding: '6px 4px', borderRadius: 4 }}>\r\n                                      <input type=\"checkbox\" checked={selected.includes(t.id)} onChange={(e) => {\r\n                                        const next = new Set(selected);\r\n                                        if (e.target.checked) next.add(t.id); else next.delete(t.id);\r\n                                        setSelectedAssignees(prev => ({ ...prev, [taskKey]: Array.from(next) }));\r\n                                      }} />\r\n                                      <div style={{ fontSize: 13 }}>\r\n                                        <div style={{ fontWeight: 700 }}>{t.name || t.nipp || t.email}</div>\r\n                                        <div style={{ fontSize: 12, color: '#666' }}>{t.nipp || ''} {t.email ? `• ${t.email}` : ''}</div>\r\n                                      </div>\r\n                                    </label>\r\n                                  ));\r\n                                })()}\r\n                              </div>\r\n\r\n                              <div style={{ display: 'flex', gap: 8, justifyContent: 'flex-start' }}>\r\n                                {currentUser === undefined ? (\r\n                                  <button disabled style={{ opacity: 0.7 }}>Checking...</button>\r\n                                ) : currentUser === null ? (\r\n                                  <>\r\n                                    <button onClick={() => { window.location.href = '/login'; }} style={{ background: '#2b7cff', color: 'white' }}>Login to assign</button>\r\n                                    <button onClick={() => { setSelectedAssignees(prev => ({ ...prev, [taskKey]: [] })); }}>Clear</button>\r\n                                  </>\r\n                                ) : !['DEPLOYED', 'IN_PROGRESS'].includes(((taskModal.wo as any)?.status ?? '').toString()) ? (\r\n                                  <>\r\n                                    <button onClick={async () => {\r\n                                      const ass = selectedAssignees[taskKey] || [];\r\n                                      if (!ass || ass.length === 0) { alert('Pilih minimal 1 teknisi'); return; }\r\n                                      try {\r\n                                        const unique = Array.from(new Set(ass));\r\n                                        for (const uid of unique) {\r\n                                          await apiClient(`/tasks/${encodeURIComponent(act.id ?? act.task_id ?? String(idx))}/assign`, { method: 'POST', body: { userId: uid, assignedBy: currentUser?.id } } as any);\r\n                                        }\r\n                                        alert('Assignment created');\r\n                                        try {\r\n                                          const woRes = await apiClient(`/work-orders/${encodeURIComponent(taskModal.wo?.id)}`);\r\n                                          const woDetail = woRes?.data ?? woRes;\r\n                                          const tasksRes = await apiClient(`/work-orders/${encodeURIComponent(taskModal.wo?.id)}/tasks`);\r\n                                          const tasks = Array.isArray(tasksRes) ? tasksRes : (tasksRes?.data ?? []);\r\n                                          setTaskModal(prev => ({ ...(prev || {}), wo: { ...(prev?.wo || {}), ...woDetail, tasks } } as any));\r\n                                        } catch (e) { console.warn('refresh tasks after assign failed', e); }\r\n                                        load(page, q);\r\n                                      } catch (err) {\r\n                                        console.error('assign error', err);\r\n                                        alert(err?.body?.message || err?.message || 'Assignment failed');\r\n                                      }\r\n                                    }}>Assign</button>\r\n                                    <button onClick={() => { setSelectedAssignees(prev => ({ ...prev, [taskKey]: [] })); }}>Clear</button>\r\n                                  </>\r\n                                ) : (\r\n                                  <button disabled style={{ opacity: 0.6 }}>Deployed</button>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                        ) : (\r\n                          <td style={{ padding: 12, verticalAlign: 'top' }} />\r\n                        )}\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit Dates Modal */}\r\n      {editing && (\r\n        <div style={{\r\n          position: 'fixed', left: 0, right: 0, top: 0, bottom: 0, background: 'rgba(0,0,0,0.4)',\r\n          display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 1000\r\n        }}>\r\n          <div style={{ background: 'white', padding: 20, width: 480, borderRadius: 8 }}>\r\n            <h3>Edit Dates — {editing.doc_no ?? editing.id}</h3>\r\n\r\n            <div style={{ display: 'flex', flexDirection: 'column', gap: 8 }}>\r\n              <label>\r\n                Start Date & Time (dd/mm/yyyy HH24:mi)\r\n                <input type=\"text\" defaultValue={formatUtcDisplay(editing.start_date)} id=\"startInput\" placeholder=\"dd/mm/yyyy HH:MM\" style={{ width: '100%', padding: 6, marginTop: 4 }} />\r\n                <div style={{ fontSize: 12, color: '#666', marginTop: 6 }}>Current: {formatUtcDisplay(editing.start_date)}</div>\r\n              </label>\r\n\r\n              <label>\r\n                End Date & Time (dd/mm/yyyy HH24:mi)\r\n                <input type=\"text\" defaultValue={formatUtcDisplay(editing.end_date)} id=\"endInput\" placeholder=\"dd/mm/yyyy HH:MM\" style={{ width: '100%', padding: 6, marginTop: 4 }} />\r\n                <div style={{ fontSize: 12, color: '#666', marginTop: 6 }}>Current: {formatUtcDisplay(editing.end_date)}</div>\r\n              </label>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 12, display: 'flex', justifyContent: 'flex-end', gap: 8 }}>\r\n              <button onClick={() => setEditing(null)} disabled={editLoading}>Cancel</button>\r\n              <button onClick={() => {\r\n                const startVal = (document.getElementById('startInput') as HTMLInputElement).value;\r\n                const endVal = (document.getElementById('endInput') as HTMLInputElement).value;\r\n                const sIso = startVal ? parseDdMMyyyyToIso(startVal) : null;\r\n                const eIso = endVal ? parseDdMMyyyyToIso(endVal) : null;\r\n                if ((startVal && !sIso) || (endVal && !eIso)) {\r\n                  alert('Tanggal tidak valid. Gunakan format dd/mm/yyyy HH:MM');\r\n                  return;\r\n                }\r\n                saveEdit(editing.id, sIso, eIso);\r\n              }} disabled={editLoading}>{editLoading ? 'Saving...' : 'Save'}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2373, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/SigapPlanner/web/app/work-orders/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport WorkOrderForm from '../../components/WorkOrderForm';\r\nimport WorkOrderList from '../../components/WorkOrderList';\r\nimport { useRef } from 'react';\r\n\r\nexport default function Page() {\r\n  // expose refresh function from list via ref\r\n  const refreshRef = useRef<(() => Promise<void>) | null>(null);\r\n  const WorkOrderListAny = WorkOrderList as any;\r\n\r\n  return (\r\n    <main style={{ padding: 24, fontFamily: 'Inter, system-ui, -apple-system, Roboto, \"Helvetica Neue\", Arial' }}>\r\n      <h1 style={{ marginBottom: 12 }}>Work Orders</h1>\r\n\r\n      <section style={{ marginBottom: 20 }}>\r\n        <WorkOrderForm onCreated={() => refreshRef.current?.()} />\r\n      </section>\r\n\r\n      <section>\r\n        <WorkOrderListAny onRefreshRequested={(fn: any) => { return refreshRef.current = fn; }} />\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,4CAA4C;IAC5C,MAAM,aAAa,IAAA,8KAAM,EAA+B;IACxD,MAAM,mBAAmB,iJAAa;IAEtC,qBACE,oMAAC;QAAK,OAAO;YAAE,SAAS;YAAI,YAAY;QAAmE;;0BACzG,oMAAC;gBAAG,OAAO;oBAAE,cAAc;gBAAG;0BAAG;;;;;;0BAEjC,oMAAC;gBAAQ,OAAO;oBAAE,cAAc;gBAAG;0BACjC,cAAA,oMAAC,iJAAa;oBAAC,WAAW,IAAM,WAAW,OAAO;;;;;;;;;;;0BAGpD,oMAAC;0BACC,cAAA,oMAAC;oBAAiB,oBAAoB,CAAC;wBAAc,OAAO,WAAW,OAAO,GAAG;oBAAI;;;;;;;;;;;;;;;;;AAI7F;GAlBwB;KAAA"}}]
}